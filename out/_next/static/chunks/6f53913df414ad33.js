(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,n)=>{"use strict";var r=e.r(71645),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var d="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,d=r[1];return s(function(){o.value=n,o.getSnapshot=t,c(o)&&d({inst:o})},[e,n,t]),i(function(){return c(o)&&d({inst:o}),e(function(){c(o)&&d({inst:o})})},[e]),l(n),n};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},2239,(e,t,n)=>{"use strict";t.exports=e.r(55838)},52822,(e,t,n)=>{"use strict";var r=e.r(71645),o=e.r(2239),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,d=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var u=s(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=i(e,(u=c(function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return s=t}return s=e}if(t=s,a(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(i=e,t):(i=e,s=n)}var i,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]))[0],u[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},30224,(e,t,n)=>{"use strict";t.exports=e.r(52822)},52683,e=>{"use strict";let t;var n,r,o,a,i,s,l,c,d,u,h,p,f,g,m,y,x,v=e.i(43476),b=e.i(71645);let w=e=>{let t,n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,o,a);return a},k=e=>{let t=e?w(e):w,n=e=>(function(e,t=e=>e){let n=b.default.useSyncExternalStore(e.subscribe,b.default.useCallback(()=>t(e.getState()),[e,t]),b.default.useCallback(()=>t(e.getInitialState()),[e,t]));return b.default.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},N=[{id:"agent-claude",name:"Claude",provider:"Anthropic",model:"claude-opus-4-5",capabilities:["coding","architecture","review","documentation","git-write"],status:"working",connectionStatus:"connected",currentTaskId:"task-7",color:"#f97316"},{id:"agent-codie",name:"Codie",provider:"OpenAI",model:"gpt-5.2",capabilities:["coding","review","testing","refactoring"],status:"waiting-review",connectionStatus:"connected",currentTaskId:"task-5",color:"#06b6d4"},{id:"agent-gemini",name:"Gem",provider:"Google",model:"gemini-2.5-pro",capabilities:["coding","research","documentation"],status:"idle",connectionStatus:"connected",color:"#a855f7"}],j=[{id:"task-1",title:"Set up authentication flow",description:"Implement OAuth2 login with GitHub and Google providers. Include session management and token refresh.",status:"done",deps:[],priority:"P0",specLink:"change-auth",assignee:"agent-claude",evidence:[{id:"ev-1",taskId:"task-1",commitSha:"a3f2dd1",testOutput:"12 tests passed, 0 failed. Coverage: 94%",testPassed:!0,agentId:"agent-claude",description:"OAuth2 flow implemented with GitHub and Google. Session management via iron-session.",timestamp:"2026-02-04T14:30:00Z"}],createdAt:"2026-02-03T10:00:00Z",updatedAt:"2026-02-04T14:30:00Z",changeId:"change-auth"},{id:"task-2",title:"Design database schema",description:"Define Prisma schema for users, projects, tasks, and agents. Include migration files.",status:"done",deps:[],priority:"P0",assignee:"agent-codie",evidence:[{id:"ev-2",taskId:"task-2",commitSha:"b7c4ee2",testOutput:"Schema valid. 4 migrations generated successfully.",testPassed:!0,agentId:"agent-codie",description:"Prisma schema with User, Project, Task, Agent, Event models. All relations defined.",timestamp:"2026-02-03T16:45:00Z"}],createdAt:"2026-02-03T10:00:00Z",updatedAt:"2026-02-03T16:45:00Z",changeId:"change-auth"},{id:"task-3",title:"Build API routes for tasks",description:"REST API endpoints: GET/POST/PATCH /api/tasks, GET /api/tasks/:id, GET /api/tasks/ready",status:"done",deps:["task-2"],priority:"P1",assignee:"agent-claude",evidence:[{id:"ev-3",taskId:"task-3",commitSha:"c9d5ff3",testOutput:"8 tests passed, 0 failed.",testPassed:!0,agentId:"agent-claude",description:"CRUD endpoints for tasks with dependency validation.",timestamp:"2026-02-04T09:15:00Z"}],createdAt:"2026-02-03T12:00:00Z",updatedAt:"2026-02-04T09:15:00Z",changeId:"change-auth"},{id:"task-4",title:"Implement WebSocket event stream",description:"Real-time event broadcasting for task status changes, agent activity, and system events.",status:"in-progress",deps:["task-3"],priority:"P1",assignee:"agent-claude",evidence:[],createdAt:"2026-02-03T14:00:00Z",updatedAt:"2026-02-04T18:00:00Z",changeId:"change-realtime"},{id:"task-5",title:"Build task dependency graph API",description:"Endpoint that returns the full task DAG with nodes and edges. Supports filtering by change/status.",status:"in-review",deps:["task-3"],priority:"P1",assignee:"agent-codie",evidence:[{id:"ev-5",taskId:"task-5",commitSha:"e2a8bb5",testOutput:"6 tests passed, 0 failed. Graph cycle detection verified.",testPassed:!0,agentId:"agent-codie",description:"DAG endpoint with topological sort, cycle detection, and critical path calculation.",timestamp:"2026-02-04T17:30:00Z"}],createdAt:"2026-02-03T14:00:00Z",updatedAt:"2026-02-04T17:30:00Z",changeId:"change-realtime"},{id:"task-6",title:"Create agent registration system",description:"API for agents to register, heartbeat, and update their status. Include capability matching.",status:"ready",deps:["task-2"],priority:"P1",assignee:void 0,evidence:[],createdAt:"2026-02-03T16:00:00Z",updatedAt:"2026-02-03T16:00:00Z",changeId:"change-agents"},{id:"task-7",title:"Build Mission Control dashboard",description:"Main dashboard with agent status cards, activity feed, quick stats, and mini task graph.",status:"in-progress",deps:["task-3","task-6"],priority:"P0",assignee:"agent-claude",evidence:[],createdAt:"2026-02-04T10:00:00Z",updatedAt:"2026-02-04T18:45:00Z",changeId:"change-dashboard"},{id:"task-8",title:"Implement diff viewer component",description:"Side-by-side and unified diff views with syntax highlighting. Support file-by-file navigation.",status:"blocked",deps:["task-5"],priority:"P2",assignee:void 0,evidence:[],createdAt:"2026-02-04T10:00:00Z",updatedAt:"2026-02-04T10:00:00Z",changeId:"change-review"},{id:"task-9",title:"Build review approval flow",description:"UI for approve/reject/request-changes. Batch approve. Comments. Status transitions.",status:"blocked",deps:["task-5","task-8"],priority:"P1",assignee:void 0,evidence:[],createdAt:"2026-02-04T10:00:00Z",updatedAt:"2026-02-04T10:00:00Z",changeId:"change-review"},{id:"task-10",title:"Design spec artifact viewer",description:"Render OpenSpec artifacts (proposal, specs, design, tasks) with pipeline status visualization.",status:"open",deps:["task-3"],priority:"P2",assignee:void 0,evidence:[],createdAt:"2026-02-04T12:00:00Z",updatedAt:"2026-02-04T12:00:00Z",changeId:"change-specs"},{id:"task-11",title:"Add keyboard navigation",description:"Cmd+K command palette, number keys for screens, arrow keys for lists.",status:"open",deps:["task-7"],priority:"P2",assignee:void 0,evidence:[],createdAt:"2026-02-04T12:00:00Z",updatedAt:"2026-02-04T12:00:00Z",changeId:"change-dashboard"},{id:"task-12",title:"Implement evidence collection",description:"System for agents to attach evidence to tasks: commits, test results, screenshots, reasoning.",status:"ready",deps:["task-3"],priority:"P1",assignee:void 0,evidence:[],createdAt:"2026-02-04T14:00:00Z",updatedAt:"2026-02-04T14:00:00Z",changeId:"change-review"},{id:"task-13",title:"Build activity timeline component",description:"Scrollable timeline of all system events with filtering by agent, type, and time range.",status:"ready",deps:["task-4"],priority:"P2",assignee:void 0,evidence:[],createdAt:"2026-02-04T14:00:00Z",updatedAt:"2026-02-04T14:00:00Z",changeId:"change-dashboard"},{id:"task-14",title:"Add dark theme polish",description:"Final visual pass: consistent spacing, animations, loading states, micro-interactions.",status:"open",deps:["task-7","task-8","task-9"],priority:"P2",assignee:void 0,evidence:[],createdAt:"2026-02-04T14:00:00Z",updatedAt:"2026-02-04T14:00:00Z",changeId:"change-dashboard"}],S=[{id:"evt-1",type:"agent-connected",payload:{message:"Claude connected via OpenClaw gateway"},timestamp:"2026-02-04T08:00:00Z",agentId:"agent-claude"},{id:"evt-2",type:"agent-connected",payload:{message:"Codie connected via Codex CLI"},timestamp:"2026-02-04T08:01:00Z",agentId:"agent-codie"},{id:"evt-3",type:"agent-connected",payload:{message:"Gem connected via Gemini CLI"},timestamp:"2026-02-04T08:02:00Z",agentId:"agent-gemini"},{id:"evt-4",type:"task-claimed",payload:{message:'Claude claimed "Build API routes for tasks"'},timestamp:"2026-02-04T08:15:00Z",agentId:"agent-claude",taskId:"task-3"},{id:"evt-5",type:"task-started",payload:{message:"Claude started working on task-3"},timestamp:"2026-02-04T08:16:00Z",agentId:"agent-claude",taskId:"task-3"},{id:"evt-6",type:"commit",payload:{sha:"c9d5ff3",message:"feat: add CRUD endpoints for tasks",files:4},timestamp:"2026-02-04T09:10:00Z",agentId:"agent-claude",taskId:"task-3"},{id:"evt-7",type:"task-completed",payload:{message:'Claude completed "Build API routes for tasks"'},timestamp:"2026-02-04T09:15:00Z",agentId:"agent-claude",taskId:"task-3"},{id:"evt-8",type:"task-claimed",payload:{message:'Codie claimed "Build task dependency graph API"'},timestamp:"2026-02-04T10:00:00Z",agentId:"agent-codie",taskId:"task-5"},{id:"evt-9",type:"task-started",payload:{message:"Codie started working on task-5"},timestamp:"2026-02-04T10:01:00Z",agentId:"agent-codie",taskId:"task-5"},{id:"evt-10",type:"change-created",payload:{name:"Real-time Event System",changeId:"change-realtime"},timestamp:"2026-02-04T11:00:00Z",changeId:"change-realtime"},{id:"evt-11",type:"spec-updated",payload:{artifact:"proposal",change:"change-realtime",message:"Initial proposal drafted"},timestamp:"2026-02-04T11:30:00Z",agentId:"agent-gemini",changeId:"change-realtime"},{id:"evt-12",type:"task-claimed",payload:{message:'Claude claimed "Implement WebSocket event stream"'},timestamp:"2026-02-04T14:00:00Z",agentId:"agent-claude",taskId:"task-4"},{id:"evt-13",type:"commit",payload:{sha:"e2a8bb5",message:"feat: DAG endpoint with topo sort + cycle detection",files:3},timestamp:"2026-02-04T17:25:00Z",agentId:"agent-codie",taskId:"task-5"},{id:"evt-14",type:"task-review-requested",payload:{message:'Codie requested review for "Build task dependency graph API"'},timestamp:"2026-02-04T17:30:00Z",agentId:"agent-codie",taskId:"task-5"},{id:"evt-15",type:"task-claimed",payload:{message:'Claude claimed "Build Mission Control dashboard"'},timestamp:"2026-02-04T18:00:00Z",agentId:"agent-claude",taskId:"task-7"},{id:"evt-16",type:"task-started",payload:{message:"Claude started working on Mission Control"},timestamp:"2026-02-04T18:01:00Z",agentId:"agent-claude",taskId:"task-7"},{id:"evt-17",type:"commit",payload:{sha:"f4b9cc7",message:"feat: agent status cards with live indicators",files:5},timestamp:"2026-02-04T18:45:00Z",agentId:"agent-claude",taskId:"task-7"}],_=[{id:"change-auth",name:"Authentication & Core API",description:"OAuth2 authentication with GitHub/Google, database schema, and core API routes.",status:"implementing",artifacts:[{id:"art-1",type:"proposal",path:"openspec/changes/auth/proposal.md",title:"Authentication System Proposal",lastUpdated:"2026-02-03T10:00:00Z",stale:!1,changeId:"change-auth"},{id:"art-2",type:"specs",path:"openspec/changes/auth/specs/auth-flow.md",title:"OAuth2 Flow Specification",lastUpdated:"2026-02-03T11:00:00Z",stale:!1,changeId:"change-auth"},{id:"art-3",type:"design",path:"openspec/changes/auth/design.md",title:"Auth Architecture Design",lastUpdated:"2026-02-03T12:00:00Z",stale:!1,changeId:"change-auth"},{id:"art-4",type:"tasks",path:"openspec/changes/auth/tasks.md",title:"Auth Implementation Tasks",lastUpdated:"2026-02-03T13:00:00Z",stale:!1,changeId:"change-auth"}],taskIds:["task-1","task-2","task-3"],createdAt:"2026-02-03T10:00:00Z",updatedAt:"2026-02-04T14:30:00Z"},{id:"change-realtime",name:"Real-time Event System",description:"WebSocket event broadcasting, task dependency graph API, and live activity feed.",status:"implementing",artifacts:[{id:"art-5",type:"proposal",path:"openspec/changes/realtime/proposal.md",title:"Real-time Events Proposal",lastUpdated:"2026-02-04T11:30:00Z",stale:!1,changeId:"change-realtime"},{id:"art-6",type:"specs",path:"openspec/changes/realtime/specs/events.md",title:"Event Schema & WebSocket Protocol",lastUpdated:"2026-02-04T12:00:00Z",stale:!0,changeId:"change-realtime"}],taskIds:["task-4","task-5","task-13"],createdAt:"2026-02-04T11:00:00Z",updatedAt:"2026-02-04T17:30:00Z"},{id:"change-dashboard",name:"Mission Control Dashboard",description:"Main orchestration dashboard with agent cards, activity feed, stats, and mini graph.",status:"implementing",artifacts:[{id:"art-7",type:"proposal",path:"openspec/changes/dashboard/proposal.md",title:"Dashboard Layout Proposal",lastUpdated:"2026-02-04T09:00:00Z",stale:!1,changeId:"change-dashboard"}],taskIds:["task-7","task-11","task-14"],createdAt:"2026-02-04T09:00:00Z",updatedAt:"2026-02-04T18:45:00Z"}],M={"task-5":[{path:"src/api/tasks/graph.ts",additions:87,deletions:12,hunks:[{header:"@@ -1,15 +1,102 @@",lines:[{type:"context",content:"import { prisma } from '@/lib/db';",lineNumber:1},{type:"context",content:"import { Task } from '@/lib/types';",lineNumber:2},{type:"add",content:"import { detectCycles, topologicalSort } from '@/lib/graph';",lineNumber:3},{type:"context",content:"",lineNumber:4},{type:"remove",content:"export async function getTaskGraph() {"},{type:"add",content:"export async function getTaskGraph(filters?: GraphFilters) {"},{type:"add",content:"  const tasks = await prisma.task.findMany({"},{type:"add",content:"    where: filters?.changeId ? { changeId: filters.changeId } : undefined,"},{type:"add",content:"    include: { dependencies: true, evidence: true },"},{type:"add",content:"  });"},{type:"add",content:""},{type:"add",content:"  const nodes = tasks.map(toGraphNode);"},{type:"add",content:"  const edges = tasks.flatMap(t =>"},{type:"add",content:"    t.dependencies.map(d => ({ from: d.id, to: t.id, type: 'blocks' as const }))"},{type:"add",content:"  );"},{type:"add",content:""},{type:"add",content:"  // Detect cycles before returning"},{type:"add",content:"  const cycles = detectCycles(nodes, edges);"},{type:"add",content:"  if (cycles.length > 0) {"},{type:"add",content:"    console.warn('Dependency cycles detected:', cycles);"},{type:"add",content:"  }"},{type:"add",content:""},{type:"add",content:"  const sorted = topologicalSort(nodes, edges);"},{type:"add",content:"  const criticalPath = findCriticalPath(sorted, edges);"},{type:"add",content:""},{type:"add",content:"  return { nodes, edges, criticalPath, cycles };"},{type:"context",content:"}",lineNumber:28}]}]},{path:"src/lib/graph.ts",additions:45,deletions:0,hunks:[{header:"@@ -0,0 +1,45 @@",lines:[{type:"add",content:"// Graph utilities for dependency analysis"},{type:"add",content:""},{type:"add",content:"interface GraphNode { id: string; }"},{type:"add",content:"interface GraphEdge { from: string; to: string; type: 'blocks'; }"},{type:"add",content:""},{type:"add",content:"export function detectCycles(nodes: GraphNode[], edges: GraphEdge[]): string[][] {"},{type:"add",content:"  const visited = new Set<string>();"},{type:"add",content:"  const inStack = new Set<string>();"},{type:"add",content:"  const cycles: string[][] = [];"},{type:"add",content:""},{type:"add",content:"  function dfs(nodeId: string, path: string[]): void {"},{type:"add",content:"    visited.add(nodeId);"},{type:"add",content:"    inStack.add(nodeId);"},{type:"add",content:""},{type:"add",content:"    const neighbors = edges.filter(e => e.from === nodeId).map(e => e.to);"},{type:"add",content:"    for (const neighbor of neighbors) {"},{type:"add",content:"      if (inStack.has(neighbor)) {"},{type:"add",content:"        cycles.push([...path, neighbor]);"},{type:"add",content:"      } else if (!visited.has(neighbor)) {"},{type:"add",content:"        dfs(neighbor, [...path, neighbor]);"},{type:"add",content:"      }"},{type:"add",content:"    }"},{type:"add",content:"    inStack.delete(nodeId);"},{type:"add",content:"  }"},{type:"add",content:""},{type:"add",content:"  nodes.forEach(n => { if (!visited.has(n.id)) dfs(n.id, [n.id]); });"},{type:"add",content:"  return cycles;"},{type:"add",content:"}"}]}]},{path:"tests/api/graph.test.ts",additions:34,deletions:2,hunks:[{header:"@@ -1,5 +1,39 @@",lines:[{type:"context",content:"import { describe, it, expect } from 'vitest';",lineNumber:1},{type:"remove",content:"import { getTaskGraph } from '@/api/tasks/graph';"},{type:"add",content:"import { getTaskGraph } from '@/api/tasks/graph';"},{type:"add",content:"import { detectCycles, topologicalSort } from '@/lib/graph';"},{type:"context",content:"",lineNumber:3},{type:"remove",content:"describe('getTaskGraph', () => {"},{type:"add",content:"describe('Task Graph API', () => {"},{type:"add",content:"  it('returns nodes and edges', async () => {"},{type:"add",content:"    const result = await getTaskGraph();"},{type:"add",content:"    expect(result.nodes).toBeDefined();"},{type:"add",content:"    expect(result.edges).toBeDefined();"},{type:"add",content:"  });"},{type:"add",content:""},{type:"add",content:"  it('detects cycles', () => {"},{type:"add",content:"    const nodes = [{ id: 'a' }, { id: 'b' }];"},{type:"add",content:"    const edges = [{ from: 'a', to: 'b', type: 'blocks' as const }, { from: 'b', to: 'a', type: 'blocks' as const }];"},{type:"add",content:"    expect(detectCycles(nodes, edges).length).toBeGreaterThan(0);"},{type:"add",content:"  });"},{type:"add",content:""},{type:"add",content:"  it('filters by changeId', async () => {"},{type:"add",content:"    const result = await getTaskGraph({ changeId: 'change-auth' });"},{type:"add",content:"    result.nodes.forEach(n => expect(n.changeId).toBe('change-auth'));"},{type:"add",content:"  });"}]}]}]},C=(t=(e,t)=>({tasks:j,agents:N,events:S,changes:_,selectedTaskId:null,activeScreen:"mission-control",filters:{},sidebarOpen:!0,commandPaletteOpen:!1,setActiveScreen:t=>e({activeScreen:t}),selectTask:t=>e({selectedTaskId:t}),setFilters:t=>e({filters:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),toggleCommandPalette:()=>e(e=>({commandPaletteOpen:!e.commandPaletteOpen})),updateTaskStatus:(t,n)=>{e(e=>{let r={id:`evt-${Date.now()}`,type:"in-review"===n?"task-review-requested":"done"===n?"task-completed":"task-started",payload:{taskId:t,newStatus:n},timestamp:new Date().toISOString(),taskId:t};return{tasks:e.tasks.map(e=>e.id===t?{...e,status:n,updatedAt:new Date().toISOString()}:e),events:[r,...e.events]}})},approveTask:t=>{e(e=>{let n={id:`evt-${Date.now()}`,type:"task-approved",payload:{taskId:t,message:"Task approved"},timestamp:new Date().toISOString(),taskId:t};return{tasks:e.tasks.map(e=>e.id===t?{...e,status:"done",updatedAt:new Date().toISOString()}:e),events:[n,...e.events]}})},rejectTask:(t,n)=>{e(e=>{let r={id:`evt-${Date.now()}`,type:"task-rejected",payload:{taskId:t,reason:n},timestamp:new Date().toISOString(),taskId:t};return{tasks:e.tasks.map(e=>e.id===t?{...e,status:"in-progress",updatedAt:new Date().toISOString()}:e),events:[r,...e.events]}})},getReadyTasks:()=>{let{tasks:e}=t();return e.filter(t=>("ready"===t.status||"open"===t.status)&&t.deps.every(t=>{let n=e.find(e=>e.id===t);return n?.status==="done"}))},getReviewTasks:()=>t().tasks.filter(e=>"in-review"===e.status),getTaskById:e=>t().tasks.find(t=>t.id===e),getAgentById:e=>t().agents.find(t=>t.id===e),getFilteredTasks:()=>{let{tasks:e,filters:n}=t();return e.filter(e=>{if(n.status?.length&&!n.status.includes(e.status)||n.agentId&&e.assignee!==n.agentId||n.changeId&&e.changeId!==n.changeId)return!1;if(n.searchQuery){let t=n.searchQuery.toLowerCase();if(!e.title.toLowerCase().includes(t)&&!e.description.toLowerCase().includes(t))return!1}return!0})}}))?k(t):k,E=(...e)=>e.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),A=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var I={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let z=(0,b.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...s},l)=>(0,b.createElement)("svg",{ref:l,...I,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:E("lucide",o),...!a&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(s)&&{"aria-hidden":"true"},...s},[...i.map(([e,t])=>(0,b.createElement)(e,t)),...Array.isArray(a)?a:[a]])),P=(e,t)=>{let n=(0,b.forwardRef)(({className:n,...r},o)=>(0,b.createElement)(z,{ref:o,iconNode:t,className:E(`lucide-${A(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r}));return n.displayName=A(e),n},T=P("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),$=P("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),D=P("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),O=P("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),R=P("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),L=P("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),B=P("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),V=P("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),H=[{screen:"mission-control",label:"Mission Control",icon:T,shortcut:"1"},{screen:"task-graph",label:"Task Graph",icon:$,shortcut:"2"},{screen:"review-queue",label:"Review Queue",icon:D,shortcut:"3"},{screen:"spec-studio",label:"Spec Studio",icon:O,shortcut:"4"},{screen:"agent-registry",label:"Agents",icon:R,shortcut:"5"}];function Z(){let{activeScreen:e,setActiveScreen:t,sidebarOpen:n,toggleSidebar:r,toggleCommandPalette:o,getReviewTasks:a}=C(),i=a().length;return(0,v.jsxs)("aside",{className:`fixed left-0 top-0 h-full z-40 flex flex-col border-r transition-all duration-300 ${n?"w-56":"w-16"}`,style:{background:"var(--color-bg-secondary)",borderColor:"var(--color-border)"},children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 px-4 h-14 border-b",style:{borderColor:"var(--color-border)"},children:[(0,v.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-purple-600 flex items-center justify-center font-bold text-sm",children:"C"}),n&&(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"font-semibold text-sm tracking-wide",children:"ClawDE"}),(0,v.jsx)("span",{className:"text-[10px] block",style:{color:"var(--color-text-muted)"},children:"v0.1 prototype"})]})]}),(0,v.jsx)("nav",{className:"flex-1 py-3 px-2 space-y-1",children:H.map(({screen:r,label:o,icon:a,shortcut:s})=>{let l=e===r;return(0,v.jsxs)("button",{onClick:()=>t(r),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all ${l?"bg-white/10 text-white":"text-gray-400 hover:text-gray-200 hover:bg-white/5"}`,children:[(0,v.jsx)(a,{size:18,className:l?"text-cyan-400":""}),n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"flex-1 text-left",children:o}),"review-queue"===r&&i>0&&(0,v.jsx)("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-purple-500/20 text-purple-400",children:i}),(0,v.jsx)("span",{className:"text-[10px] font-mono",style:{color:"var(--color-text-muted)"},children:s})]})]},r)})}),(0,v.jsxs)("div",{className:"p-2 space-y-1 border-t",style:{borderColor:"var(--color-border)"},children:[(0,v.jsxs)("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-gray-200 hover:bg-white/5 transition-all",children:[(0,v.jsx)(V,{size:16}),n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"flex-1 text-left",children:"Command"}),(0,v.jsx)("kbd",{className:"text-[10px] font-mono px-1 py-0.5 rounded",style:{background:"var(--color-bg-tertiary)"},children:"âŒ˜K"})]})]}),(0,v.jsxs)("button",{onClick:r,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-gray-200 hover:bg-white/5 transition-all",children:[n?(0,v.jsx)(L,{size:16}):(0,v.jsx)(B,{size:16}),n&&(0,v.jsx)("span",{children:"Collapse"})]})]})]})}let F={open:"#64748b",ready:"#06b6d4","in-progress":"#f59e0b","in-review":"#a855f7",blocked:"#ef4444",done:"#22c55e"},X={idle:"#64748b",working:"#f59e0b",blocked:"#ef4444","waiting-review":"#a855f7"};function q({status:e,type:t="task",size:n="md",pulse:r}){let o=("agent"===t?X:F)[e]||"#64748b",a={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"};return(0,v.jsxs)("span",{className:"relative inline-flex",children:[(0,v.jsx)("span",{className:`${a[n]} rounded-full inline-block`,style:{backgroundColor:o}}),r&&(0,v.jsx)("span",{className:`absolute inset-0 ${a[n]} rounded-full animate-ping`,style:{backgroundColor:o,opacity:.4}})]})}let Y=P("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),K=P("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),W=P("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),G={idle:"Idle",working:"Working",blocked:"Blocked","waiting-review":"Awaiting Review"};function U(){let{agents:e,getTaskById:t}=C();return(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map(e=>{let n=e.currentTaskId?t(e.currentTaskId):null,r={idle:K,working:Y,blocked:W,"waiting-review":K}[e.status];return(0,v.jsxs)("div",{className:"rounded-xl p-4 border transition-all hover:border-white/10",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm",style:{backgroundColor:`${e.color}20`,color:e.color},children:(0,v.jsx)(R,{size:20})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,v.jsx)("div",{className:"text-xs",style:{color:"var(--color-text-muted)"},children:e.model})]})]}),(0,v.jsx)(q,{status:e.status,type:"agent",size:"md",pulse:"working"===e.status})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs px-2.5 py-1.5 rounded-md",style:{background:"var(--color-bg-tertiary)"},children:[(0,v.jsx)(r,{size:12,style:{color:e.color}}),(0,v.jsx)("span",{style:{color:"var(--color-text-secondary)"},children:G[e.status]})]}),n&&(0,v.jsxs)("div",{className:"mt-3 pt-3 border-t",style:{borderColor:"var(--color-border-subtle)"},children:[(0,v.jsx)("div",{className:"text-[10px] uppercase tracking-wider mb-1",style:{color:"var(--color-text-muted)"},children:"Current Task"}),(0,v.jsx)("div",{className:"text-xs truncate",style:{color:"var(--color-text-secondary)"},children:n.title})]}),(0,v.jsxs)("div",{className:"mt-3 flex gap-1 flex-wrap",children:[e.capabilities.slice(0,3).map(e=>(0,v.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{background:"var(--color-bg-tertiary)",color:"var(--color-text-muted)"},children:e},e)),e.capabilities.length>3&&(0,v.jsxs)("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{background:"var(--color-bg-tertiary)",color:"var(--color-text-muted)"},children:["+",e.capabilities.length-3]})]})]},e.id)})})}let Q=P("git-commit-horizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),J=P("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),ee=P("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),et=P("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),en=P("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),er=P("plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]]),eo=P("plug-zap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]),ea=P("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ei=P("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),es=P("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),el={"task-created":{icon:ea,color:"var(--color-text-muted)",label:"Created"},"task-claimed":{icon:J,color:"var(--color-accent-cyan)",label:"Claimed"},"task-started":{icon:J,color:"var(--color-accent-amber)",label:"Started"},"task-completed":{icon:D,color:"var(--color-accent-green)",label:"Completed"},"task-review-requested":{icon:ee,color:"var(--color-accent-purple)",label:"Review Requested"},"task-approved":{icon:es,color:"var(--color-accent-green)",label:"Approved"},"task-rejected":{icon:et,color:"var(--color-accent-red)",label:"Rejected"},"task-blocked":{icon:en,color:"var(--color-accent-red)",label:"Blocked"},"agent-connected":{icon:er,color:"var(--color-accent-green)",label:"Connected"},"agent-disconnected":{icon:eo,color:"var(--color-accent-red)",label:"Disconnected"},commit:{icon:Q,color:"var(--color-accent-orange)",label:"Commit"},"spec-updated":{icon:O,color:"var(--color-accent-cyan)",label:"Spec Updated"},"change-created":{icon:ea,color:"var(--color-accent-cyan)",label:"Change Created"},"change-verified":{icon:D,color:"var(--color-accent-green)",label:"Verified"},"change-archived":{icon:ei,color:"var(--color-text-muted)",label:"Archived"}};function ec({event:e}){let{agents:t}=C(),n=el[e.type],r=n.icon,o=e.agentId?t.find(t=>t.id===e.agentId):null,a=e.payload.message||e.payload.sha||e.type;return(0,v.jsxs)("div",{className:"flex items-start gap-3 py-2.5 px-3 hover:bg-white/[0.02] rounded-lg transition-colors",children:[(0,v.jsx)("div",{className:"mt-0.5",children:(0,v.jsx)(r,{size:14,style:{color:n.color}})}),(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"text-xs leading-relaxed",style:{color:"var(--color-text-secondary)"},children:[o&&(0,v.jsx)("span",{className:"font-medium",style:{color:o.color},children:o.name})," ",(0,v.jsx)("span",{className:"truncate",children:a})]}),"commit"===e.type&&e.payload.sha&&(0,v.jsx)("span",{className:"text-[10px] font-mono",style:{color:"var(--color-text-muted)"},children:e.payload.sha.slice(0,7)})]}),(0,v.jsx)("span",{className:"text-[10px] font-mono shrink-0",style:{color:"var(--color-text-muted)"},children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})})]})}function ed(){let{events:e}=C(),t=[...e].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());return(0,v.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:"var(--color-border)"},children:[(0,v.jsx)("h3",{className:"text-sm font-semibold",children:"Activity"}),(0,v.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,v.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),(0,v.jsx)("span",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:"Live"})]})]}),(0,v.jsx)("div",{className:"max-h-[400px] overflow-y-auto divide-y",style:{borderColor:"var(--color-border-subtle)"},children:t.map(e=>(0,v.jsx)(ec,{event:e},e.id))})]})}let eu=P("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),eh=P("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ep=[{status:"done",label:"Done",icon:D,colorVar:"var(--color-status-done)"},{status:"in-progress",label:"In Progress",icon:K,colorVar:"var(--color-status-in-progress)"},{status:"in-review",label:"In Review",icon:ee,colorVar:"var(--color-status-in-review)"},{status:"blocked",label:"Blocked",icon:en,colorVar:"var(--color-status-blocked)"},{status:"ready",label:"Ready",icon:eu,colorVar:"var(--color-status-ready)"}];function ef(){let{tasks:e,agents:t}=C(),n=e.length,r=e.filter(e=>"done"===e.status).length,o=n>0?Math.round(r/n*100):0,a=t.filter(e=>"connected"===e.connectionStatus).length;return(0,v.jsxs)("div",{className:"rounded-xl border p-4",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,v.jsx)("h3",{className:"text-sm font-semibold",children:"Progress"}),(0,v.jsxs)("span",{className:"text-2xl font-bold",style:{color:"var(--color-accent-cyan)"},children:[o,"%"]})]}),(0,v.jsx)("div",{className:"w-full h-2 rounded-full mb-4",style:{background:"var(--color-bg-tertiary)"},children:(0,v.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${o}%`,background:"linear-gradient(90deg, var(--color-accent-cyan), var(--color-accent-purple))"}})}),(0,v.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[ep.map(({status:t,label:n,icon:r,colorVar:o})=>{let a=e.filter(e=>e.status===t).length;return(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[(0,v.jsx)(r,{size:12,style:{color:o}}),(0,v.jsx)("span",{className:"text-lg font-bold",style:{color:o},children:a})]}),(0,v.jsx)("div",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:n})]},t)}),(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[(0,v.jsx)(eh,{size:12,style:{color:"var(--color-accent-orange)"}}),(0,v.jsx)("span",{className:"text-lg font-bold",style:{color:"var(--color-accent-orange)"},children:a})]}),(0,v.jsx)("div",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:"Agents"})]})]})]})}function eg(){return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Mission Control"}),(0,v.jsx)("p",{className:"text-sm mt-1",style:{color:"var(--color-text-muted)"},children:"Real-time overview of agents, tasks, and activity"})]}),(0,v.jsxs)("section",{children:[(0,v.jsx)("h2",{className:"text-xs uppercase tracking-wider font-semibold mb-3",style:{color:"var(--color-text-muted)"},children:"Active Agents"}),(0,v.jsx)(U,{})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,v.jsx)("div",{className:"lg:col-span-1",children:(0,v.jsx)(ef,{})}),(0,v.jsx)("div",{className:"lg:col-span-2",children:(0,v.jsx)(ed,{})})]})]})}function em(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=em(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}e.i(47167);var ey={value:()=>{}};function ex(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new ev(r)}function ev(e){this._=e}function eb(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=ey,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function ew(){}function ek(e){return null==e?ew:function(){return this.querySelector(e)}}function eN(){return[]}function ej(e){return null==e?eN:function(){return this.querySelectorAll(e)}}function eS(e){return function(){return this.matches(e)}}function e_(e){return function(t){return t.matches(e)}}ev.prototype=ex.prototype={constructor:ev,on:function(e,t){var n,r=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),a=-1,i=o.length;if(arguments.length<2){for(;++a<i;)if((n=(e=o[a]).type)&&(n=function(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++a<i;)if(n=(e=o[a]).type)r[n]=eb(r[n],e.name,t);else if(null==t)for(n in r)r[n]=eb(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ev(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};var eM=Array.prototype.find;function eC(){return this.firstElementChild}var eE=Array.prototype.filter;function eA(){return Array.from(this.children)}function eI(e){return Array(e.length)}function ez(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function eP(e,t,n,r,o,a){for(var i,s=0,l=t.length,c=a.length;s<c;++s)(i=t[s])?(i.__data__=a[s],r[s]=i):n[s]=new ez(e,a[s]);for(;s<l;++s)(i=t[s])&&(o[s]=i)}function eT(e,t,n,r,o,a,i){var s,l,c,d=new Map,u=t.length,h=a.length,p=Array(u);for(s=0;s<u;++s)(l=t[s])&&(p[s]=c=i.call(l,l.__data__,s,t)+"",d.has(c)?o[s]=l:d.set(c,l));for(s=0;s<h;++s)c=i.call(e,a[s],s,a)+"",(l=d.get(c))?(r[s]=l,l.__data__=a[s],d.delete(c)):n[s]=new ez(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&d.get(p[s])===l&&(o[s]=l)}function e$(e){return e.__data__}function eD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}ez.prototype={constructor:ez,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var eO="http://www.w3.org/1999/xhtml";let eR={svg:"http://www.w3.org/2000/svg",xhtml:eO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eL(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),eR.hasOwnProperty(t)?{space:eR[t],local:e}:e}function eB(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eV(e,t){return e.style.getPropertyValue(t)||eB(e).getComputedStyle(e,null).getPropertyValue(t)}function eH(e){return e.trim().split(/^|\s+/)}function eZ(e){return e.classList||new eF(e)}function eF(e){this._node=e,this._names=eH(e.getAttribute("class")||"")}function eX(e,t){for(var n=eZ(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function eq(e,t){for(var n=eZ(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function eY(){this.textContent=""}function eK(){this.innerHTML=""}function eW(){this.nextSibling&&this.parentNode.appendChild(this)}function eG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eU(e){var t=eL(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===eO&&t.documentElement.namespaceURI===eO?t.createElement(e):t.createElementNS(n,e)}})(t)}function eQ(){return null}function eJ(){var e=this.parentNode;e&&e.removeChild(this)}function e0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function e1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function e2(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function e4(e,t,n){return function(){var r,o=this.__on,a=function(e){t.call(this,e,this.__data__)};if(o){for(var i=0,s=o.length;i<s;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function e5(e,t,n){var r=eB(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}eF.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var e3=[null];function e6(e,t){this._groups=e,this._parents=t}function e8(){return new e6([[document.documentElement]],e3)}function e7(e){return"string"==typeof e?new e6([[document.querySelector(e)]],[document.documentElement]):new e6([[e]],e3)}function e9(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}e6.prototype=e8.prototype={constructor:e6,select:function(e){"function"!=typeof e&&(e=ek(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var a,i,s=t[o],l=s.length,c=r[o]=Array(l),d=0;d<l;++d)(a=s[d])&&(i=e.call(a,a.__data__,d,s))&&("__data__"in a&&(i.__data__=a.__data__),c[d]=i);return new e6(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=ej(e);for(var n=this._groups,r=n.length,o=[],a=[],i=0;i<r;++i)for(var s,l=n[i],c=l.length,d=0;d<c;++d)(s=l[d])&&(o.push(e.call(s,s.__data__,d,l)),a.push(s));return new e6(o,a)},selectChild:function(e){var t;return this.select(null==e?eC:(t="function"==typeof e?e:e_(e),function(){return eM.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?eA:(t="function"==typeof e?e:e_(e),function(){return eE.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=eS(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new e6(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,e$);var n=t?eT:eP,r=this._parents,o=this._groups;"function"!=typeof e&&(x=e,e=function(){return x});for(var a=o.length,i=Array(a),s=Array(a),l=Array(a),c=0;c<a;++c){var d=r[c],u=o[c],h=u.length,p="object"==typeof(y=e.call(d,d&&d.__data__,c,r))&&"length"in y?y:Array.from(y),f=p.length,g=s[c]=Array(f),m=i[c]=Array(f);n(d,u,g,m,l[c]=Array(h),p,t);for(var y,x,v,b,w=0,k=0;w<f;++w)if(v=g[w]){for(w>=k&&(k=w+1);!(b=m[k])&&++k<f;);v._next=b||null}}return(i=new e6(i,r))._enter=s,i._exit=l,i},enter:function(){return new e6(this._enter||this._groups.map(eI),this._parents)},exit:function(){return new e6(this._exit||this._groups.map(eI),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=Array(o),l=0;l<i;++l)for(var c,d=n[l],u=r[l],h=d.length,p=s[l]=Array(h),f=0;f<h;++f)(c=d[f]||u[f])&&(p[f]=c);for(;l<o;++l)s[l]=n[l];return new e6(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=eD);for(var n=this._groups,r=n.length,o=Array(r),a=0;a<r;++a){for(var i,s=n[a],l=s.length,c=o[a]=Array(l),d=0;d<l;++d)(i=s[d])&&(c[d]=i);c.sort(t)}return new e6(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,s=a.length;i<s;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=eL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):eV(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=eH(e+"");if(arguments.length<2){for(var r=eZ(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?eX:eq)(this,e)}}:t?function(e){return function(){eX(this,e)}}:function(e){return function(){eq(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?eY:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?eK:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(eW)},lower:function(){return this.each(eG)},append:function(e){var t="function"==typeof e?e:eU(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:eU(e),r=null==t?eQ:"function"==typeof t?t:ek(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(eJ)},clone:function(e){return this.select(e?e1:e0)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),i=a.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,c=0,d=s.length;c<d;++c)for(r=0,l=s[c];r<i;++r)if((o=a[r]).type===l.type&&o.name===l.name)return l.value}return}for(r=0,s=t?e4:e2;r<i;++r)this.each(s(a[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return e5(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return e5(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};let te={passive:!1},tt={capture:!0,passive:!1};function tn(e){e.stopImmediatePropagation()}function tr(e){e.preventDefault(),e.stopImmediatePropagation()}function to(e){var t=e.document.documentElement,n=e7(e).on("dragstart.drag",tr,tt);"onselectstart"in t?n.on("selectstart.drag",tr,tt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ta(e,t){var n=e.document.documentElement,r=e7(e).on("dragstart.drag",null);t&&(r.on("click.drag",tr,tt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let ti=e=>()=>e;function ts(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function tl(e){return!e.ctrlKey&&!e.button}function tc(){return this.parentNode}function td(e,t){return null==t?{x:e.x,y:e.y}:t}function tu(){return navigator.maxTouchPoints||"ontouchstart"in this}function th(){var e,t,n,r,o=tl,a=tc,i=td,s=tu,l={},c=ex("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",m).on("touchmove.drag",y,te).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(i,s){if(!r&&o.call(this,i,s)){var l=v(this,a.call(this,i,s),i,s,"mouse");l&&(e7(i.view).on("mousemove.drag",f,tt).on("mouseup.drag",g,tt),to(i.view),tn(i),n=!1,e=i.clientX,t=i.clientY,l("start",i))}}function f(r){if(tr(r),!n){var o=r.clientX-e,a=r.clientY-t;n=o*o+a*a>u}l.mouse("drag",r)}function g(e){e7(e.view).on("mousemove.drag mouseup.drag",null),ta(e.view,n),tr(e),l.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,i=e.changedTouches,s=a.call(this,e,t),l=i.length;for(n=0;n<l;++n)(r=v(this,s,e,t,i[n].identifier,i[n]))&&(tn(e),r("start",e,i[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(tr(e),n("drag",e,r[t]))}function x(e){var t,n,o=e.changedTouches,a=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=l[o[t].identifier])&&(tn(e),n("end",e,o[t]))}function v(e,t,n,r,o,a){var s,u,p,f=c.copy(),g=e9(a||n,t);if(null!=(p=i.call(e,new ts("beforestart",{sourceEvent:n,target:h,identifier:o,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),r)))return s=p.x-g[0]||0,u=p.y-g[1]||0,function n(a,i,c){var m,y=g;switch(a){case"start":l[o]=n,m=d++;break;case"end":delete l[o],--d;case"drag":g=e9(c||i,t),m=d}f.call(a,e,new ts(a,{sourceEvent:i,subject:p,target:h,identifier:o,active:m,x:g[0]+s,y:g[1]+u,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:f}),r)}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:ti(!!e),h):o},h.container=function(e){return arguments.length?(a="function"==typeof e?e:ti(e),h):a},h.subject=function(e){return arguments.length?(i="function"==typeof e?e:ti(e),h):i},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:ti(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e*=1)*e,h):Math.sqrt(u)},h}function tp(e){return((e=Math.exp(e))+1/e)/2}ts.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let tf=function e(t,n,r){function o(e,o){var a,i,s=e[0],l=e[1],c=e[2],d=o[0],u=o[1],h=o[2],p=d-s,f=u-l,g=p*p+f*f;if(g<1e-12)i=Math.log(h/c)/t,a=function(e){return[s+e*p,l+e*f,c*Math.exp(t*e*i)]};else{var m=Math.sqrt(g),y=(h*h-c*c+r*g)/(2*c*n*m),x=(h*h-c*c-r*g)/(2*h*n*m),v=Math.log(Math.sqrt(y*y+1)-y);i=(Math.log(Math.sqrt(x*x+1)-x)-v)/t,a=function(e){var r,o,a=e*i,d=tp(v),u=c/(n*m)*(d*(((r=Math.exp(2*(r=t*a+v)))-1)/(r+1))-((o=Math.exp(o=v))-1/o)/2);return[s+u*p,l+u*f,c*d/tp(t*a+v)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var tg,tm,ty=0,tx=0,tv=0,tb=0,tw=0,tk=0,tN="object"==typeof performance&&performance.now?performance:Date,tj="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tS(){return tw||(tj(t_),tw=tN.now()+tk)}function t_(){tw=0}function tM(){this._call=this._time=this._next=null}function tC(e,t,n){var r=new tM;return r.restart(e,t,n),r}function tE(){tw=(tb=tN.now())+tk,ty=tx=0;try{tS(),++ty;for(var e,t=tg;t;)(e=tw-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ty}finally{ty=0,function(){for(var e,t,n=tg,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:tg=t);tm=e,tI(r)}(),tw=0}}function tA(){var e=tN.now(),t=e-tb;t>1e3&&(tk-=t,tb=e)}function tI(e){!ty&&(tx&&(tx=clearTimeout(tx)),e-tw>24?(e<1/0&&(tx=setTimeout(tE,e-tN.now()-tk)),tv&&(tv=clearInterval(tv))):(tv||(tb=tN.now(),tv=setInterval(tA,1e3)),ty=1,tj(tE)))}function tz(e,t,n){var r=new tM;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}tM.prototype=tC.prototype={constructor:tM,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?tS():+n)+(null==t?0:+t),this._next||tm===this||(tm?tm._next=this:tg=this,tm=this),this._call=e,this._time=n,tI()},stop:function(){this._call&&(this._call=null,this._time=1/0,tI())}};var tP=ex("start","end","cancel","interrupt"),tT=[];function t$(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(l){var c,d,u,h;if(1!==n.state)return s();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return tz(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(tz(function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(c=0,n.state=3,r=Array(u=n.tween.length),d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=tC(function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:tP,tween:tT,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function tD(e,t){var n=tR(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function tO(e,t){var n=tR(e,t);if(n.state>3)throw Error("too late; already running");return n}function tR(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function tL(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a){if((n=a[o]).name!==t){i=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]}i&&delete e.__transition}}function tB(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var tV=180/Math.PI,tH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tZ(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*tV,skewX:Math.atan(l)*tV,scaleX:i,scaleY:s}}function tF(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var s,l,c,d,u=[],h=[];return a=e(a),i=e(i),!function(e,r,o,a,i,s){if(e!==o||r!==a){var l=i.push("translate(",null,t,null,n);s.push({i:l-4,x:tB(e,o)},{i:l-2,x:tB(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,u,h),s=a.rotate,l=i.rotate,s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),h.push({i:u.push(o(u)+"rotate(",null,r)-2,x:tB(s,l)})):l&&u.push(o(u)+"rotate("+l+r),c=a.skewX,d=i.skewX,c!==d?h.push({i:u.push(o(u)+"skewX(",null,r)-2,x:tB(c,d)}):d&&u.push(o(u)+"skewX("+d+r),!function(e,t,n,r,a,i){if(e!==n||t!==r){var s=a.push(o(a)+"scale(",null,",",null,")");i.push({i:s-4,x:tB(e,n)},{i:s-2,x:tB(t,r)})}else(1!==n||1!==r)&&a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,u,h),a=i=null,function(e){for(var t,n=-1,r=h.length;++n<r;)u[(t=h[n]).i]=t.x(e);return u.join("")}}}var tX=tF(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tH:tZ(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),tq=tF(function(e){return null==e?tH:(d||(d=document.createElementNS("http://www.w3.org/2000/svg","g")),d.setAttribute("transform",e),e=d.transform.baseVal.consolidate())?tZ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):tH},", ",")",")");function tY(e,t,n){var r=e._id;return e.each(function(){var e=tO(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return tR(e,r).value[t]}}function tK(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tW(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tG(){}var tU="\\s*([+-]?\\d+)\\s*",tQ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tJ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t0=/^#([0-9a-f]{3,8})$/,t1=RegExp(`^rgb\\(${tU},${tU},${tU}\\)$`),t2=RegExp(`^rgb\\(${tJ},${tJ},${tJ}\\)$`),t4=RegExp(`^rgba\\(${tU},${tU},${tU},${tQ}\\)$`),t5=RegExp(`^rgba\\(${tJ},${tJ},${tJ},${tQ}\\)$`),t3=RegExp(`^hsl\\(${tQ},${tJ},${tJ}\\)$`),t6=RegExp(`^hsla\\(${tQ},${tJ},${tJ},${tQ}\\)$`),t8={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function t7(){return this.rgb().formatHex()}function t9(){return this.rgb().formatRgb()}function ne(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nt(t):3===n?new no(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?nn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?nn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=t1.exec(e))?new no(t[1],t[2],t[3],1):(t=t2.exec(e))?new no(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=t4.exec(e))?nn(t[1],t[2],t[3],t[4]):(t=t5.exec(e))?nn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=t3.exec(e))?nd(t[1],t[2]/100,t[3]/100,1):(t=t6.exec(e))?nd(t[1],t[2]/100,t[3]/100,t[4]):t8.hasOwnProperty(e)?nt(t8[e]):"transparent"===e?new no(NaN,NaN,NaN,0):null}function nt(e){return new no(e>>16&255,e>>8&255,255&e,1)}function nn(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function nr(e,t,n,r){var o;return 1==arguments.length?((o=e)instanceof tG||(o=ne(o)),o)?new no((o=o.rgb()).r,o.g,o.b,o.opacity):new no:new no(e,t,n,null==r?1:r)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function na(){return`#${nc(this.r)}${nc(this.g)}${nc(this.b)}`}function ni(){let e=ns(this.opacity);return`${1===e?"rgb(":"rgba("}${nl(this.r)}, ${nl(this.g)}, ${nl(this.b)}${1===e?")":`, ${e})`}`}function ns(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nc(e){return((e=nl(e))<16?"0":"")+e.toString(16)}function nd(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nh(e,t,n,r)}function nu(e){if(e instanceof nh)return new nh(e.h,e.s,e.l,e.opacity);if(e instanceof tG||(e=ne(e)),!e)return new nh;if(e instanceof nh)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(i=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new nh(i,s,l,e.opacity)}function nh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function np(e){return(e=(e||0)%360)<0?e+360:e}function nf(e){return Math.max(0,Math.min(1,e||0))}function ng(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function nm(e,t,n,r,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*n+(1+3*e+3*a-3*i)*r+i*o)/6}tK(tG,ne,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t7,formatHex:t7,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nu(this).formatHsl()},formatRgb:t9,toString:t9}),tK(no,nr,tW(tG,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(nl(this.r),nl(this.g),nl(this.b),ns(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:na,formatHex:na,formatHex8:function(){return`#${nc(this.r)}${nc(this.g)}${nc(this.b)}${nc((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:ni,toString:ni})),tK(nh,function(e,t,n,r){return 1==arguments.length?nu(e):new nh(e,t,n,null==r?1:r)},tW(tG,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new nh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new nh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new no(ng(e>=240?e-240:e+120,o,r),ng(e,o,r),ng(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new nh(np(this.h),nf(this.s),nf(this.l),ns(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ns(this.opacity);return`${1===e?"hsl(":"hsla("}${np(this.h)}, ${100*nf(this.s)}%, ${100*nf(this.l)}%${1===e?")":`, ${e})`}`}}));let ny=e=>()=>e;function nx(e,t){var n=t-e;return n?function(t){return e+t*n}:ny(isNaN(e)?t:e)}let nv=function e(t){var n,r=1==(n=+t)?nx:function(e,t){var r,o,a;return t-e?(r=e,o=t,r=Math.pow(r,a=n),o=Math.pow(o,a)-r,a=1/a,function(e){return Math.pow(r+e*o,a)}):ny(isNaN(e)?t:e)};function o(e,t){var n=r((e=nr(e)).r,(t=nr(t)).r),o=r(e.g,t.g),a=r(e.b,t.b),i=nx(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return o.gamma=e,o}(1);function nb(e){return function(t){var n,r,o=t.length,a=Array(o),i=Array(o),s=Array(o);for(n=0;n<o;++n)r=nr(t[n]),a[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return a=e(a),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=i(e),r.b=s(e),r+""}}}nb(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],i=r>0?e[r-1]:2*o-a,s=r<t-1?e[r+2]:2*a-o;return nm((n-r/t)*t,i,o,a,s)}}),nb(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return nm((n-r/t)*t,o,a,i,s)}});var nw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nk=RegExp(nw.source,"g");function nN(e,t){var n,r,o,a,i,s=nw.lastIndex=nk.lastIndex=0,l=-1,c=[],d=[];for(e+="",t+="";(o=nw.exec(e))&&(a=nk.exec(t));)(i=a.index)>s&&(i=t.slice(s,i),c[l]?c[l]+=i:c[++l]=i),(o=o[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,d.push({i:l,x:tB(o,a)})),s=nk.lastIndex;return s<t.length&&(i=t.slice(s),c[l]?c[l]+=i:c[++l]=i),c.length<2?d[0]?(n=d[0].x,function(e){return n(e)+""}):(r=t,function(){return r}):(t=d.length,function(e){for(var n,r=0;r<t;++r)c[(n=d[r]).i]=n.x(e);return c.join("")})}function nj(e,t){var n;return("number"==typeof t?tB:t instanceof ne?nv:(n=ne(t))?(t=n,nv):nN)(e,t)}var nS=e8.prototype.constructor;function n_(e){return function(){this.style.removeProperty(e)}}var nM=0;function nC(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var nE=e8.prototype;nC.prototype=(function(e){return e8().transition(e)}).prototype={constructor:nC,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ek(e));for(var r=this._groups,o=r.length,a=Array(o),i=0;i<o;++i)for(var s,l,c=r[i],d=c.length,u=a[i]=Array(d),h=0;h<d;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),u[h]=l,t$(u[h],t,n,h,u,tR(s,n)));return new nC(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ej(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l,c=r[s],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var h,p=e.call(l,l.__data__,u,c),f=tR(l,n),g=0,m=p.length;g<m;++g)(h=p[g])&&t$(h,t,n,g,p,f);a.push(p),i.push(l)}return new nC(a,i,t,n)},selectChild:nE.selectChild,selectChildren:nE.selectChildren,filter:function(e){"function"!=typeof e&&(e=eS(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new nC(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=Array(r),s=0;s<a;++s)for(var l,c=t[s],d=n[s],u=c.length,h=i[s]=Array(u),p=0;p<u;++p)(l=c[p]||d[p])&&(h[p]=l);for(;s<r;++s)i[s]=t[s];return new nC(i,this._parents,this._name,this._id)},selection:function(){return new nS(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++nM,r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],l=s.length,c=0;c<l;++c)if(i=s[c]){var d=tR(i,t);t$(i,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new nC(r,this._parents,e,n)},call:nE.call,nodes:nE.nodes,node:nE.node,size:nE.size,empty:nE.empty,each:nE.each,on:function(e,t){var n,r,o,a,i,s,l=this._id;return arguments.length<2?tR(this.node(),l).on.on(e):this.each((n=l,r=e,o=t,s=(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?tD:tO,function(){var e=s(this,n),t=e.on;t!==a&&(i=(a=t).copy()).on(r,o),e.on=i}))},attr:function(e,t){var n=eL(e),r="transform"===n?tq:nj;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,a;return function(){var i,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,l))}}:function(e,t,n){var r,o,a;return function(){var i,s,l=n(this);return null==l?void this.removeAttribute(e):(i=this.getAttribute(e))===(s=l+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,l))}})(n,r,tY(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}:function(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=eL(e);return this.tween(n,(r.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttributeNS(e.space,e.local,o.call(this,t))}),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttribute(e,o.call(this,t))}),n}return o._value=t,o})(r,t))},style:function(e,t,n){var r,o,a,i,s,l,c,d,u,h,p,f,g,m,y,x,v,b,w,k,N,j="transform"==(e+="")?tX:nj;return null==t?this.styleTween(e,(r=e,function(){var e=eV(this,r),t=(this.style.removeProperty(r),eV(this,r));return e===t?null:e===o&&t===a?i:i=j(o=e,a=t)})).on("end.style."+e,n_(e)):"function"==typeof t?this.styleTween(e,(s=e,l=tY(this,"style."+e,t),function(){var e=eV(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=eV(this,s)),e===n?null:e===c&&n===d?u:(d=n,u=j(c=e,t))})).each((h=this._id,v="end."+(x="style."+(p=e)),function(){var e=tO(this,h),t=e.on,n=null==e.value[x]?y||(y=n_(p)):void 0;(t!==f||m!==n)&&(g=(f=t).copy()).on(v,m=n),e.on=g})):this.styleTween(e,(b=e,N=t+"",function(){var e=eV(this,b);return e===N?null:e===w?k:k=j(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&function(t){this.style.setProperty(e,a.call(this,t),n)}),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=tY(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=tR(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=tO(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw Error();return function(){var a=tO(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}a.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){tD(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){tD(this,e).delay=t}})(t,e)):tR(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){tO(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){tO(this,e).duration=t}})(t,e)):tR(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){tO(this,e).ease=t}}(t,e)):tR(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();tO(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){0==--o&&a()}};n.each(function(){var n=tO(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===o&&a()})},[Symbol.iterator]:nE[Symbol.iterator]};var nA={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};e8.prototype.interrupt=function(e){return this.each(function(){tL(this,e)})},e8.prototype.transition=function(e){var t,n;e instanceof nC?(t=e._id,e=e._name):(t=++nM,(n=nA).time=tS(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],l=s.length,c=0;c<l;++c)(i=s[c])&&t$(i,e,t,c,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(i,t));return new nC(r,this._parents,e,t)};let nI=e=>()=>e;function nz(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function nP(e,t,n){this.k=e,this.x=t,this.y=n}nP.prototype={constructor:nP,scale:function(e){return 1===e?this:new nP(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new nP(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nT=new nP(1,0,0);function n$(e){for(;!e.__zoom;)if(!(e=e.parentNode))return nT;return e.__zoom}function nD(e){e.stopImmediatePropagation()}function nO(e){e.preventDefault(),e.stopImmediatePropagation()}function nR(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function nL(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function nB(){return this.__zoom||nT}function nV(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nH(){return navigator.maxTouchPoints||"ontouchstart"in this}function nZ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function nF(){var e,t,n,r=nR,o=nL,a=nZ,i=nV,s=nH,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=tf,h=ex("start","zoom","end"),p=0,f=10;function g(e){e.property("__zoom",nB).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",j).filter(s).on("touchstart.zoom",S).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new nP(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new nP(e.k,r,o)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function v(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,a=b(this,e).event(r),i=o.apply(this,e),s=null==n?x(i):"function"==typeof n?n.apply(this,e):n,l=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),c=this.__zoom,d="function"==typeof t?t.apply(this,e):t,h=u(c.invert(s).concat(l/c.k),d.invert(s).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=l/t[2];e=new nP(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function k(e,...t){if(r.apply(this,arguments)){var n=b(this,t).event(e),o=this.__zoom,s=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,i.apply(this,arguments)))),d=e9(e);if(n.wheel)(n.mouse[0][0]!==d[0]||n.mouse[0][1]!==d[1])&&(n.mouse[1]=o.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(o.k===s)return;n.mouse=[d,o.invert(d)],tL(this),n.start()}nO(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(y(m(o,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function N(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=b(this,t,!0).event(e),s=e7(e.view).on("mousemove.zoom",function(e){if(nO(e),!i.moved){var t=e.clientX-d,n=e.clientY-u;i.moved=t*t+n*n>p}i.event(e).zoom("mouse",a(y(i.that.__zoom,i.mouse[0]=e9(e,o),i.mouse[1]),i.extent,c))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),ta(e.view,i.moved),nO(e),i.event(e).end()},!0),l=e9(e,o),d=e.clientX,u=e.clientY;to(e.view),nD(e),i.mouse=[l,this.__zoom.invert(l)],tL(this),i.start()}}function j(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=e9(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(i),l=n.k*(e.shiftKey?.5:2),u=a(y(m(n,l),i,s),o.apply(this,t),c);nO(e),d>0?e7(this).transition().duration(d).call(v,u,i,e):e7(this).call(g.transform,u,i,e)}}function S(n,...o){if(r.apply(this,arguments)){var a,i,s,l,c=n.touches,d=c.length,u=b(this,o,n.changedTouches.length===d).event(n);for(nD(n),i=0;i<d;++i)l=[l=e9(s=c[i],this),this.__zoom.invert(l),s.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,a=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(u.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),tL(this),u.start())}}function _(e,...t){if(this.__zooming){var n,r,o,i,s=b(this,t).event(e),l=e.changedTouches,d=l.length;for(nO(e),n=0;n<d;++n)o=e9(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=o:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=o);if(r=s.that.__zoom,s.touch1){var u=s.touch0[0],h=s.touch0[1],p=s.touch1[0],f=s.touch1[1],g=(g=p[0]-u[0])*g+(g=p[1]-u[1])*g,x=(x=f[0]-h[0])*x+(x=f[1]-h[1])*x;r=m(r,Math.sqrt(g/x)),o=[(u[0]+p[0])/2,(u[1]+p[1])/2],i=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!s.touch0)return;o=s.touch0[0],i=s.touch0[1]}s.zoom("touch",a(y(r,o,i),s.extent,c))}}function M(e,...r){if(this.__zooming){var o,a,i=b(this,r).event(e),s=e.changedTouches,l=s.length;for(nD(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)a=s[o],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(a=e9(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<f)){var c=e7(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",nB),e!==o?v(e,t,n,r):o.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,n,r){g.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?x(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(i),l="function"==typeof t?t.apply(this,arguments):t;return a(y(m(r,l),i,s),e,c)},n,r)},g.translateBy=function(e,t,n,r){g.transform(e,function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},g.translateTo=function(e,t,n,r,i){g.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,s=null==r?x(e):"function"==typeof r?r.apply(this,arguments):r;return a(nT.translate(s[0],s[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=e7(this.that).datum();h.call(e,this.that,new nz(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:nI(+e),g):i},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:nI(!!e),g):r},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:nI(!!e),g):s},g.extent=function(e){return arguments.length?(o="function"==typeof e?e:nI([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(a=e,g):a},g.duration=function(e){return arguments.length?(d=+e,g):d},g.interpolate=function(e){return arguments.length?(u=e,g):u},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(p=(e*=1)*e,g):Math.sqrt(p)},g.tapDistance=function(e){return arguments.length?(f=+e,g):f},g}function nX(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?ny(t):("number"===o?tB:"string"===o?(r=ne(t))?(t=r,nv):nN:t instanceof ne?nv:t instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(r){return n.setTime(e*(1-r)+t*r),n}}:!ArrayBuffer.isView(n=t)||n instanceof DataView?Array.isArray(t)?function(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,a=Array(o),i=Array(r);for(n=0;n<o;++n)a[n]=nX(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,r={},o={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?r[n]=nX(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}:tB:function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<r;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}})(e,t)}n$.prototype=nP.prototype;let nq=[[-1/0,-1/0],[1/0,1/0]],nY=["Enter"," ","Escape"],nK={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(n=u||(u={})).Strict="strict",n.Loose="loose",(r=h||(h={})).Free="free",r.Vertical="vertical",r.Horizontal="horizontal",(o=p||(p={})).Partial="partial",o.Full="full";let nW={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};(a=f||(f={})).Bezier="default",a.Straight="straight",a.Step="step",a.SmoothStep="smoothstep",a.SimpleBezier="simplebezier",(i=g||(g={})).Arrow="arrow",i.ArrowClosed="arrowclosed",(s=m||(m={})).Left="left",s.Top="top",s.Right="right",s.Bottom="bottom";let nG={[m.Left]:m.Right,[m.Right]:m.Left,[m.Top]:m.Bottom,[m.Bottom]:m.Top};function nU(e){return null===e?null:e?"valid":"invalid"}let nQ=e=>"id"in e&&"source"in e&&"target"in e,nJ=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),n0=(e,t=[0,0])=>{let{width:n,height:r}=rx(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},n1=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(n=rt(n,ra(e)),r=!0)}),r?rr(n):{x:0,y:0,width:0,height:0}},n2=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{let s={...rh(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(i&&!n||r)continue;let o=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null,d=rs(s,ro(t)),u=(o??0)*(c??0),h=a&&d>0;(!t.internals.handleBounds||h||d>=u||t.dragging)&&l.push(t)}return l};async function n4({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){let s,l;if(0===e.size)return Promise.resolve(!0);let c=rg(n1((s=new Map,l=i?.nodes?new Set(i.nodes.map(e=>e.id)):null,e.forEach(e=>{e.measured.width&&e.measured.height&&(i?.includeHiddenNodes||!e.hidden)&&(!l||l.has(e.id))&&s.set(e.id,e)}),s)),t,n,i?.minZoom??o,i?.maxZoom??a,i?.padding??.1);return await r.setViewport(c,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function n5({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){let i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=i.origin??r,u=i.extent||o;if("parent"!==i.extent||i.expandParent)s&&ry(i.extent)&&(u=[[i.extent[0][0]+l,i.extent[0][1]+c],[i.extent[1][0]+l,i.extent[1][1]+c]]);else if(s){let e=s.measured.width,t=s.measured.height;e&&t&&(u=[[l,c],[l+e,c+t]])}else a?.("005","Only child nodes can use a parent extent.");let h=ry(u)?n8(t,u,i.measured):t;return(void 0===i.measured.width||void 0===i.measured.height)&&a?.("015","It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."),{position:{x:h.x-l+(i.measured.width??0)*d[0],y:h.y-c+(i.measured.height??0)*d[1]},positionAbsolute:h}}async function n3({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){let a,i=new Set(e.map(e=>e.id)),s=[];for(let e of n){if(!1===e.deletable)continue;let t=i.has(e.id),n=!t&&e.parentId&&s.find(t=>t.id===e.parentId);(t||n)&&s.push(e)}let l=new Set(t.map(e=>e.id)),c=r.filter(e=>!1!==e.deletable),d=(a=new Set,s.forEach(e=>{a.add(e.id)}),c.filter(e=>a.has(e.source)||a.has(e.target)));for(let e of c)l.has(e.id)&&!d.find(t=>t.id===e.id)&&d.push(e);if(!o)return{edges:d,nodes:s};let u=await o({nodes:s,edges:d});return"boolean"==typeof u?u?{edges:d,nodes:s}:{edges:[],nodes:[]}:u}let n6=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),n8=(e={x:0,y:0},t,n)=>({x:n6(e.x,t[0][0],t[1][0]-(n?.width??0)),y:n6(e.y,t[0][1],t[1][1]-(n?.height??0))});function n7(e,t,n){let{width:r,height:o}=rx(n),{x:a,y:i}=n.internals.positionAbsolute;return n8(e,[[a,i],[a+r,i+o]],t)}let n9=(e,t,n)=>e<t?n6(Math.abs(e-t),1,t)/t:e>n?-n6(Math.abs(e-n),1,t)/t:0,re=(e,t,n=15,r=40)=>[n9(e.x,r,t.width-r)*n,n9(e.y,r,t.height-r)*n],rt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),rn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),rr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ro=(e,t=[0,0])=>{let{x:n,y:r}=nJ(e)?e.internals.positionAbsolute:n0(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ra=(e,t=[0,0])=>{let{x:n,y:r}=nJ(e)?e.internals.positionAbsolute:n0(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},ri=(e,t)=>rr(rt(rn(e),rn(t))),rs=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),rl=e=>rc(e.width)&&rc(e.height)&&rc(e.x)&&rc(e.y),rc=e=>!isNaN(e)&&isFinite(e),rd=(e,t)=>{},ru=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),rh=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{let s={x:(e-n)/o,y:(t-r)/o};return a?ru(s,i):s},rp=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function rf(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let rg=(e,t,n,r,o,a)=>{let i=function(e,t,n){if("string"==typeof e||"number"==typeof e){let r=rf(e,n),o=rf(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){let r=rf(e.top??e.y??0,n),o=rf(e.bottom??e.y??0,n),a=rf(e.left??e.x??0,t),i=rf(e.right??e.x??0,t);return{top:r,right:i,bottom:o,left:a,x:a+i,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(a,t,n),s=n6(Math.min((t-i.x)/e.width,(n-i.y)/e.height),r,o),l=e.x+e.width/2,c=e.y+e.height/2,d=t/2-l*s,u=n/2-c*s,h=function(e,t,n,r,o,a){let{x:i,y:s}=rp(e,[t,n,r]),{x:l,y:c}=rp({x:e.x+e.width,y:e.y+e.height},[t,n,r]);return{left:Math.floor(i),top:Math.floor(s),right:Math.floor(o-l),bottom:Math.floor(a-c)}}(e,d,u,s,t,n),p={left:Math.min(h.left-i.left,0),top:Math.min(h.top-i.top,0),right:Math.min(h.right-i.right,0),bottom:Math.min(h.bottom-i.bottom,0)};return{x:d-p.left+p.right,y:u-p.top+p.bottom,zoom:s}},rm=()=>"u">typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function ry(e){return null!=e&&"parent"!==e}function rx(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function rv(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function rb(e,t={width:0,height:0},n,r,o){let a={...e},i=r.get(n);if(i){let e=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*e[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*e[1]}return a}function rw(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function rk(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){let{x:a,y:i}=rM(e),s=rh({x:a-(o?.left??0),y:i-(o?.top??0)},r),{x:l,y:c}=n?ru(s,t):s;return{xSnapped:l,ySnapped:c,...s}}let rN=e=>({width:e.offsetWidth,height:e.offsetHeight}),rj=e=>e?.getRootNode?.()||window?.document,rS=["INPUT","SELECT","TEXTAREA"];function r_(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(rS.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let rM=(e,t)=>{let n="clientX"in e,r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},rC=(e,t,n,r,o)=>{let a=t.querySelectorAll(`.${e}`);return a&&a.length?Array.from(a).map(t=>{let a=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...rN(t)}}):null};function rE({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){let l=.125*e+.375*o+.375*i+.125*n,c=.125*t+.375*a+.375*s+.125*r,d=Math.abs(l-e),u=Math.abs(c-t);return[l,c,d,u]}function rA(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function rI({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case m.Left:return[t-rA(t-r,a),n];case m.Right:return[t+rA(r-t,a),n];case m.Top:return[t,n-rA(n-o,a)];case m.Bottom:return[t,n+rA(o-n,a)]}}function rz({sourceX:e,sourceY:t,sourcePosition:n=m.Bottom,targetX:r,targetY:o,targetPosition:a=m.Top,curvature:i=.25}){let[s,l]=rI({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,d]=rI({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[u,h,p,f]=rE({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${l} ${c},${d} ${r},${o}`,u,h,p,f]}function rP({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,a=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+a:r-a,o,a]}let rT=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`;function r$({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,a,i,s]=rP({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}let rD={[m.Left]:{x:-1,y:0},[m.Right]:{x:1,y:0},[m.Top]:{x:0,y:-1},[m.Bottom]:{x:0,y:1}},rO=({source:e,sourcePosition:t=m.Bottom,target:n})=>t===m.Left||t===m.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},rR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function rL({sourceX:e,sourceY:t,sourcePosition:n=m.Bottom,targetX:r,targetY:o,targetPosition:a=m.Top,borderRadius:i=5,centerX:s,centerY:l,offset:c=20,stepPosition:d=.5}){let[u,h,p,f,g]=function({source:e,sourcePosition:t=m.Bottom,target:n,targetPosition:r=m.Top,center:o,offset:a,stepPosition:i}){let s,l,c=rD[t],d=rD[r],u={x:e.x+c.x*a,y:e.y+c.y*a},h={x:n.x+d.x*a,y:n.y+d.y*a},p=rO({source:u,sourcePosition:t,target:h}),f=0!==p.x?"x":"y",g=p[f],y=[],x={x:0,y:0},v={x:0,y:0},[,,b,w]=rP({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[f]*d[f]==-1){"x"===f?(s=o.x??u.x+(h.x-u.x)*i,l=o.y??(u.y+h.y)/2):(s=o.x??(u.x+h.x)/2,l=o.y??u.y+(h.y-u.y)*i);let e=[{x:s,y:u.y},{x:s,y:h.y}],t=[{x:u.x,y:l},{x:h.x,y:l}];y=c[f]===g?"x"===f?e:t:"x"===f?t:e}else{let o=[{x:u.x,y:h.y}],i=[{x:h.x,y:u.y}];if(y="x"===f?c.x===g?i:o:c.y===g?o:i,t===r){let t=Math.abs(e[f]-n[f]);if(t<=a){let r=Math.min(a-1,a-t);c[f]===g?x[f]=(u[f]>e[f]?-1:1)*r:v[f]=(h[f]>n[f]?-1:1)*r}}if(t!==r){let e="x"===f?"y":"x",t=c[f]===d[e],n=u[e]>h[e],r=u[e]<h[e];(1===c[f]&&(!t&&n||t&&r)||1!==c[f]&&(!t&&r||t&&n))&&(y="x"===f?o:i)}let p={x:u.x+x.x,y:u.y+x.y},m={x:h.x+v.x,y:h.y+v.y};Math.max(Math.abs(p.x-y[0].x),Math.abs(m.x-y[0].x))>=Math.max(Math.abs(p.y-y[0].y),Math.abs(m.y-y[0].y))?(s=(p.x+m.x)/2,l=y[0].y):(s=y[0].x,l=(p.y+m.y)/2)}return[[e,{x:u.x+x.x,y:u.y+x.y},...y,{x:h.x+v.x,y:h.y+v.y},n],s,l,b,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:l},offset:c,stepPosition:d});return[u.reduce((e,t,n)=>e+(n>0&&n<u.length-1?function(e,t,n,r){let o=Math.min(rR(e,t)/2,rR(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+o*t},${i}Q ${a},${i} ${a},${i+o*r}`}let s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${i+o*l}Q ${a},${i} ${a+o*s},${i}`}(u[n-1],t,u[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`),""),h,p,f,g]}function rB(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function rV(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function rH(e,t,n=m.Left,r=!1){let o=(t?.x??0)+e.internals.positionAbsolute.x,a=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??rx(e);if(r)return{x:o+i/2,y:a+s/2};switch(t?.position??n){case m.Top:return{x:o+i/2,y:a};case m.Right:return{x:o+i,y:a+s/2};case m.Bottom:return{x:o+i/2,y:a+s};case m.Left:return{x:o,y:a+s/2}}}function rZ(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function rF(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}let rX={nodeOrigin:[0,0],nodeExtent:nq,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},rq={...rX,checkEquality:!0};function rY(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function rK(e){return"manual"===e}function rW(e,t,n,r={}){let o=rY(rq,r),a={i:0},i=new Map(t),s=o?.elevateNodesOnSelect&&!rK(o.zIndexMode)?1e3:0,l=e.length>0;for(let c of(t.clear(),n.clear(),e)){let e=i.get(c.id);if(o.checkEquality&&c===e?.internals.userNode)t.set(c.id,e);else{let n=n8(n0(c,o.nodeOrigin),ry(c.extent)?c.extent:o.nodeExtent,rx(c));e={...o.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:n,handleBounds:function(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;let n=[],r=[];for(let t of e.handles){let o={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(o):"target"===t.type&&r.push(o)}return{source:n,target:r}}(c,e),z:rU(c,s,o.zIndexMode),userNode:c}},t.set(c.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(l=!1),c.parentId&&rG(e,t,n,r,a)}return l}function rG(e,t,n,r,o){let{elevateNodesOnSelect:a,nodeOrigin:i,nodeExtent:s,zIndexMode:l}=rY(rX,r),c=e.parentId,d=t.get(c);if(!d)return void console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n),o&&!d.parentId&&void 0===d.internals.rootParentIndex&&"auto"===l&&(d.internals.rootParentIndex=++o.i,d.internals.z=d.internals.z+10*o.i),o&&void 0!==d.internals.rootParentIndex&&(o.i=d.internals.rootParentIndex);let{x:u,y:h,z:p}=function(e,t,n,r,o,a){let{x:i,y:s}=t.internals.positionAbsolute,l=rx(e),c=n0(e,n),d=ry(e.extent)?n8(c,e.extent,l):c,u=n8({x:i+d.x,y:s+d.y},r,l);"parent"===e.extent&&(u=n7(u,l,t));let h=rU(e,o,a),p=t.internals.z??0;return{x:u.x,y:u.y,z:p>=h?p+1:h}}(e,d,i,s,a&&!rK(l)?1e3:0,l),{positionAbsolute:f}=e.internals,g=u!==f.x||h!==f.y;(g||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:u,y:h}:f,z:p}})}function rU(e,t,n){let r=rc(e.zIndex)?e.zIndex:0;return rK(n)?r:r+(e.selected?t:0)}function rQ(e,t,n,r=[0,0]){let o=[],a=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=ri(a.get(n.parentId)?.expandedRect??ro(e),n.rect);a.set(n.parentId,{expandedRect:r,parent:e})}return a.size>0&&a.forEach(({expandedRect:t,parent:a},i)=>{let s=a.internals.positionAbsolute,l=rx(a),c=a.origin??r,d=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,u=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),p=Math.max(l.height,Math.round(t.height)),f=(h-l.width)*c[0],g=(p-l.height)*c[1];(d>0||u>0||f||g)&&(o.push({id:i,type:"position",position:{x:a.position.x-d+f,y:a.position.y-u+g}}),n.get(i)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+u}})})),(l.width<t.width||l.height<t.height||d||u)&&o.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?c[0]*d-f:0),height:p+(u?c[1]*u-g:0)}})}),o}async function rJ({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r);return Promise.resolve(!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]))}function r0(e,t,n,r,o,a){let i=o,s=r.get(i)||new Map;r.set(i,s.set(n,t)),i=`${o}-${e}`;let l=r.get(i)||new Map;if(r.set(i,l.set(n,t)),a){i=`${o}-${e}-${a}`;let s=r.get(i)||new Map;r.set(i,s.set(n,t))}}function r1(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:o,sourceHandle:a=null,targetHandle:i=null}=r,s={edgeId:r.id,source:n,target:o,sourceHandle:a,targetHandle:i},l=`${n}-${a}--${o}-${i}`;r0("source",s,`${o}-${i}--${n}-${a}`,e,n,a),r0("target",s,l,e,o,i),t.set(r.id,r)}}function r2(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)break;r=r?.parentElement}while(r)return!1}function r4({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let o=[];for(let[e,a]of t){let t=n.get(e)?.internals.userNode;t&&o.push({...t,position:a.position,dragging:r})}if(!e)return[o[0],o];let a=n.get(e)?.internals.userNode;return[a?{...a,position:t.get(e)?.position||a.position,dragging:r}:o[0],o]}function r5(e,t,n,r,o,a=!1){let i=r.get(e);if(!i)return null;let s="strict"===o?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],l=(n?s?.find(e=>e.id===n):s?.[0])??null;return l&&a?{...l,...rH(i,l,l.position,!0)}:l}function r3(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}let r6=()=>!0;function r8(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:s,flowId:l,isValidConnection:c=r6,nodeLookup:d}){let h="target"===a,p=t?i.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:g}=rM(e),m=i.elementFromPoint(f,g),y=m?.classList.contains(`${s}-flow__handle`)?m:p,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){let e=r3(void 0,y),t=y.getAttribute("data-nodeid"),a=y.getAttribute("data-handleid"),i=y.classList.contains("connectable"),s=y.classList.contains("connectableend");if(!t||!e)return x;let l={source:h?t:r,sourceHandle:h?a:o,target:h?r:t,targetHandle:h?o:a};x.connection=l,x.isValid=i&&s&&(n===u.Strict?h&&"source"===e||!h&&"target"===e:t!==r||a!==o)&&c(l),x.toHandle=r5(t,e,a,d,n,!0)}return x}let r7=function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:h,cancelConnection:p,onConnectStart:f,onConnect:g,onConnectEnd:y,isValidConnection:x=r6,onReconnectEnd:v,updateConnection:b,getTransform:w,getFromHandle:k,autoPanSpeed:N,dragThreshold:j=1,handleDomNode:S}){let _,M=rj(e.target),C=0,{x:E,y:A}=rM(e),I=r3(a,S),z=s?.getBoundingClientRect(),P=!1;if(!z||!I)return;let T=r5(o,I,r,l,t);if(!T)return;let $=rM(e,z),D=!1,O=null,R=!1,L=null,B={...T,nodeId:o,type:I,position:T.position},V=l.get(o),H={inProgress:!0,isValid:null,from:rH(V,B,m.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:V,to:$,toHandle:null,toPosition:nG[B.position],toNode:null,pointer:$};function Z(){P=!0,b(H),f?.(e,{nodeId:o,handleId:r,handleType:I})}function F(e){var a,s;let p;if(!P){let{x:t,y:n}=rM(e),r=t-E,o=n-A;if(!(r*r+o*o>j*j))return;Z()}if(!k()||!B)return void X(e);let f=w();_=function(e,t,n,r){let o=[],a=1/0;for(let i of function(e,t,n){let r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())rs(o,ro(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:s,y:l}=rH(i,n,n.position,!0),c=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(l-e.y,2));c>t||(c<a?(o=[{...n,x:s,y:l}],a=c):c===a&&o.push({...n,x:s,y:l}))}if(!o.length)return null;if(o.length>1){let e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(rh($=rM(e,z),f,!1,[1,1]),n,l,B),D||(!function e(){if(!d||!z)return;let[t,n]=re($,z,N);h({x:t,y:n}),C=requestAnimationFrame(e)}(),D=!0);let g=r8(e,{handle:_,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:x,doc:M,lib:c,flowId:u,nodeLookup:l});L=g.handleDomNode,O=g.connection,a=!!_,s=g.isValid,p=null,s?p=!0:a&&!s&&(p=!1),R=p;let y=l.get(o),v=y?rH(y,B,m.Left,!0):H.from,S={...H,from:v,isValid:R,to:g.toHandle&&R?rp({x:g.toHandle.x,y:g.toHandle.y},f):$,toHandle:g.toHandle,toPosition:R&&g.toHandle?g.toHandle.position:nG[B.position],toNode:g.toHandle?l.get(g.toHandle.nodeId):null,pointer:$};b(S),H=S}function X(e){if(!("touches"in e)||!(e.touches.length>0)){if(P){(_||L)&&O&&R&&g?.(O);let{inProgress:t,...n}=H,r={...n,toPosition:H.toHandle?H.toPosition:null};y?.(e,r),a&&v?.(e,r)}p(),cancelAnimationFrame(C),D=!1,R=!1,O=null,L=null,M.removeEventListener("mousemove",F),M.removeEventListener("mouseup",X),M.removeEventListener("touchmove",F),M.removeEventListener("touchend",X)}}0===j&&Z(),M.addEventListener("mousemove",F),M.addEventListener("mouseup",X),M.addEventListener("touchmove",F),M.addEventListener("touchend",X)},r9=e=>({x:e.x,y:e.y,zoom:e.k}),oe=({x:e,y:t,zoom:n})=>nT.translate(e,t).scale(n),ot=(e,t)=>e.target.closest(`.${t}`),on=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),or=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,oo=(e,t=0,n=or,r=()=>{})=>{let o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},oa=e=>{let t=e.ctrlKey&&rm()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function oi(e){let t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:e.includes("left"),affectsY:e.includes("top")}}function os(e,t){return Math.max(0,t-e)}function ol(e,t){return Math.max(0,e-t)}function oc(e,t,n){return Math.max(0,t-e,e-n)}(l=y||(y={})).Line="line",l.Handle="handle";let od={width:0,height:0,x:0,y:0},ou={...od,pointerX:0,pointerY:0,aspectRatio:1};var oh=e.i(30224);let op={get url(){return`file://${e.P("node_modules/@xyflow/react/node_modules/zustand/esm/vanilla.mjs")}`}},of=e=>{let t,n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(op.env?op.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},{useDebugValue:og}=b.default,{useSyncExternalStoreWithSelector:om}=oh.default,oy=e=>e;function ox(e,t=oy,n){let r=om(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return og(r),r}let ov=(e,t)=>{let n=e?of(e):of,r=(e,r=t)=>ox(n,e,r);return Object.assign(r,n),r};function ob(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}e.i(74080);let ow=(0,b.createContext)(null),ok=ow.Provider,oN="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function oj(e,t){let n=(0,b.useContext)(ow);if(null===n)throw Error(oN);return ox(n,e,t)}function oS(){let e=(0,b.useContext)(ow);if(null===e)throw Error(oN);return(0,b.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let o_={display:"none"},oM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oC="react-flow__node-desc",oE="react-flow__edge-desc",oA=e=>e.ariaLiveMessage,oI=e=>e.ariaLabelConfig;function oz({rfId:e}){let t=oj(oA);return(0,v.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:oM,children:t})}function oP({rfId:e,disableKeyboardA11y:t}){let n=oj(oI);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{id:`${oC}-${e}`,style:o_,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,v.jsx)("div",{id:`${oE}-${e}`,style:o_,children:n["edge.a11yDescription.default"]}),!t&&(0,v.jsx)(oz,{rfId:e})]})}let oT=(0,b.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...o},a)=>{let i=`${e}`.split("-");return(0,v.jsx)("div",{className:em(["react-flow__panel",n,...i]),style:r,ref:a,...o,children:t})});function o$({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,v.jsx)(oT,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,v.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}oT.displayName="Panel";let oD=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},oO=e=>e.id;function oR(e,t){return ob(e.selectedNodes.map(oO),t.selectedNodes.map(oO))&&ob(e.selectedEdges.map(oO),t.selectedEdges.map(oO))}function oL({onSelectionChange:e}){let t=oS(),{selectedNodes:n,selectedEdges:r}=oj(oD,oR);return(0,b.useEffect)(()=>{let o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(e=>e(o))},[n,r,e]),null}let oB=e=>!!e.onSelectionChangeHandlers;function oV({onSelectionChange:e}){let t=oj(oB);return e||t?(0,v.jsx)(oL,{onSelectionChange:e}):null}let oH=[0,0],oZ={x:0,y:0,zoom:1},oF=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode","rfId"],oX=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),oq={translateExtent:nq,nodeOrigin:oH,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function oY(e){let{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:l}=oj(oX,ob),c=oS();(0,b.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=oq,s()}),[]);let d=(0,b.useRef)(oq);return(0,b.useEffect)(()=>{for(let s of oF){let l=e[s];if(l!==d.current[s]&&void 0!==e[s])if("nodes"===s)t(l);else if("edges"===s)n(l);else if("minZoom"===s)r(l);else if("maxZoom"===s)o(l);else if("translateExtent"===s)a(l);else if("nodeExtent"===s)i(l);else if("ariaLabelConfig"===s)c.setState({ariaLabelConfig:{...nK,...l||{}}});else"fitView"===s?c.setState({fitViewQueued:l}):"fitViewOptions"===s?c.setState({fitViewOptions:l}):c.setState({[s]:l})}d.current=e},oF.map(t=>e[t])),null}function oK(){return"u"<typeof window||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}let oW="u">typeof document?document:null;function oG(e=null,t={target:oW,actInsideInputWithModifier:!0}){let[n,r]=(0,b.useState)(!1),o=(0,b.useRef)(!1),a=(0,b.useRef)(new Set([])),[i,s]=(0,b.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,b.useEffect)(()=>{let n=t?.target??oW,l=t?.actInsideInputWithModifier??!0;if(null!==e){let e=e=>{if(o.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!o.current||o.current&&!l)&&r_(e))return!1;let n=oQ(e.code,s);if(a.current.add(e[n]),oU(i,a.current,!1)){let n=e.composedPath?.()?.[0]||e.target,a=n?.nodeName==="BUTTON"||n?.nodeName==="A";!1!==t.preventDefault&&(o.current||!a)&&e.preventDefault(),r(!0)}},c=e=>{let t=oQ(e.code,s);oU(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",c),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",c),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function oU(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function oQ(e,t){return t.includes(e)?"code":"key"}function oJ(e,t){let n=[],r=new Map,o=[];for(let t of e)if("add"===t.type){o.push(t);continue}else if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{let e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}for(let e of t){let t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let o={...e};for(let e of t){var a=e,i=o;switch(a.type){case"select":i.selected=a.selected;break;case"position":void 0!==a.position&&(i.position=a.position),void 0!==a.dragging&&(i.dragging=a.dragging);break;case"dimensions":void 0!==a.dimensions&&(i.measured={...a.dimensions},a.setAttributes&&((!0===a.setAttributes||"width"===a.setAttributes)&&(i.width=a.dimensions.width),(!0===a.setAttributes||"height"===a.setAttributes)&&(i.height=a.dimensions.height))),"boolean"==typeof a.resizing&&(i.resizing=a.resizing)}}n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function o0(e,t){return{id:e,type:"select",selected:t}}function o1(e,t=new Set,n=!1){let r=[];for(let[o,a]of e){let e=t.has(o);(void 0!==a.selected||e)&&a.selected!==e&&(n&&(a.selected=e),r.push(o0(a.id,e)))}return r}function o2({items:e=[],lookup:t}){let n=[],r=new Map(e.map(e=>[e.id,e]));for(let[r,o]of e.entries()){let e=t.get(o.id),a=e?.internals?.userNode??e;void 0!==a&&a!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===a&&n.push({item:o,type:"add",index:r})}for(let[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function o4(e){return{id:e.id,type:"remove"}}let o5=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e);function o3(e){return(0,b.forwardRef)(e)}let o6="u">typeof window?b.useLayoutEffect:b.useEffect;function o8(e){let[t,n]=(0,b.useState)(BigInt(0)),[r]=(0,b.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return o6(()=>{let t=r.get();t.length&&(e(t),r.reset())},[t]),r}let o7=(0,b.createContext)(null);function o9({children:e}){let t=oS(),n=o8((0,b.useCallback)(e=>{let{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:a,nodeLookup:i,fitViewQueued:s,onNodesChangeMiddlewareMap:l}=t.getState(),c=n;for(let t of e)c="function"==typeof t?t(c):t;let d=o2({items:c,lookup:i});for(let e of l.values())d=e(d);o&&r(c),d.length>0?a?.(d):s&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),r=o8((0,b.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:a,edgeLookup:i}=t.getState(),s=n;for(let t of e)s="function"==typeof t?t(s):t;o?r(s):a&&a(o2({items:s,lookup:i}))},[])),o=(0,b.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,v.jsx)(o7.Provider,{value:o,children:e})}let ae=e=>!!e.panZoom;function at(){let e,t=(e=oS(),(0,b.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{let{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),l=rg(t,r,o,a,i,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:r,snapGrid:o,snapToGrid:a,domNode:i}=e.getState();if(!i)return t;let{x:s,y:l}=i.getBoundingClientRect(),c={x:t.x-s,y:t.y-l},d=n.snapGrid??o;return rh(c,r,n.snapToGrid??a,d)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:o,y:a}=r.getBoundingClientRect(),i=rp(t,n);return{x:i.x+o,y:i.y+a}}}),[])),n=oS(),r=function(){let e=(0,b.useContext)(o7);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),o=oj(ae),a=(0,b.useMemo)(()=>{let e=e=>n.getState().nodeLookup.get(e),t=e=>{r.nodeQueue.push(e)},o=e=>{r.edgeQueue.push(e)},a=e=>{let{nodeLookup:t,nodeOrigin:r}=n.getState(),o=o5(e)?e:t.get(e.id),a=o.parentId?rb(o.position,o.measured,o.parentId,t,r):o.position;return ro({...o,position:a,width:o.measured?.width??o.width,height:o.measured?.height??o.height})},i=(e,n,r={replace:!1})=>{t(t=>t.map(t=>{if(t.id===e){let e="function"==typeof n?n(t):n;return r.replace&&o5(e)?e:{...t,...e}}return t}))},s=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&nQ(e)?e:{...r,...e}}return r}))};return{getNodes:()=>n.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=n.getState();return e.map(e=>({...e}))},getEdge:e=>n.getState().edgeLookup.get(e),setNodes:t,setEdges:o,addNodes:e=>{let t=Array.isArray(e)?e:[e];r.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];r.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:t=[],transform:r}=n.getState(),[o,a,i]=r;return{nodes:e.map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:o,y:a,zoom:i}}},deleteElements:async({nodes:e=[],edges:t=[]})=>{let{nodes:r,edges:o,onNodesDelete:a,onEdgesDelete:i,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:d}=n.getState(),{nodes:u,edges:h}=await n3({nodesToRemove:e,edgesToRemove:t,nodes:r,edges:o,onBeforeDelete:d}),p=h.length>0,f=u.length>0;if(p){let e=h.map(o4);i?.(h),l(e)}if(f){let e=u.map(o4);a?.(u),s(e)}return(f||p)&&c?.({nodes:u,edges:h}),{deletedNodes:u,deletedEdges:h}},getIntersectingNodes:(e,t=!0,r)=>{let o=rl(e),i=o?e:a(e),s=void 0!==r;return i?(r||n.getState().nodes).filter(r=>{let a=n.getState().nodeLookup.get(r.id);if(a&&!o&&(r.id===e.id||!a.internals.positionAbsolute))return!1;let l=ro(s?r:a),c=rs(l,i);return t&&c>0||c>=l.width*l.height||c>=i.width*i.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let r=rl(e)?e:a(e);if(!r)return!1;let o=rs(r,t);return n&&o>0||o>=t.width*t.height||o>=r.width*r.height},updateNode:i,updateNodeData:(e,t,n={replace:!1})=>{i(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{let{nodeLookup:t,nodeOrigin:r}=n.getState();return((e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:rr(e.reduce((e,n)=>{let r="string"==typeof n,o=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(o=r?t.nodeLookup.get(n):nJ(n)?n:t.nodeLookup.get(n.id)),rt(e,o?ra(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})))(e,{nodeLookup:t,nodeOrigin:r})},getHandleConnections:({type:e,id:t,nodeId:r})=>Array.from(n.getState().connectionLookup.get(`${r}-${e}${t?`-${t}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:t,nodeId:r})=>Array.from(n.getState().connectionLookup.get(`${r}${e?t?`-${e}-${t}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{let t,o,a=n.getState().fitViewResolver??{promise:new Promise((e,n)=>{t=e,o=n}),resolve:t,reject:o};return n.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:a}),r.nodeQueue.push(e=>[...e]),a.promise}}},[]);return(0,b.useMemo)(()=>({...a,...t,viewportInitialized:o}),[o])}let an=e=>e.selected,ar="u">typeof window?window:void 0,ao={position:"absolute",width:"100%",height:"100%",top:0,left:0},aa=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ai({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=h.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:c,minZoom:d,maxZoom:u,zoomActivationKeyCode:p,preventScrolling:f=!0,children:g,noWheelClassName:m,noPanClassName:y,onViewportChange:x,isControlledViewport:w,paneClickDistance:k,selectionOnDrag:N}){let j,S=oS(),_=(0,b.useRef)(null),{userSelectionActive:M,lib:C,connectionInProgress:E}=oj(aa,ob),A=oG(p),I=(0,b.useRef)();j=oS(),(0,b.useEffect)(()=>{let e=()=>{if(!_.current||!(_.current.checkVisibility?.()??!0))return!1;let e=rN(_.current);(0===e.height||0===e.width)&&j.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),j.setState({width:e.width||500,height:e.height||500})};if(_.current){e(),window.addEventListener("resize",e);let t=new ResizeObserver(()=>e());return t.observe(_.current),()=>{window.removeEventListener("resize",e),t&&_.current&&t.unobserve(_.current)}}},[]);let z=(0,b.useCallback)(e=>{x?.({x:e[0],y:e[1],zoom:e[2]}),w||S.setState({transform:e})},[x,w]);return(0,b.useEffect)(()=>{if(_.current){I.current=function({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:a,onPanZoomStart:i,onPanZoomEnd:s,onDraggingChange:l}){let c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),u=nF().scaleExtent([t,n]).translateExtent(r),p=e7(e).call(u);x({x:o.x,y:o.y,zoom:n6(o.zoom,t,n)},[[0,0],[d.width,d.height]],r);let f=p.on("wheel.zoom"),g=p.on("dblclick.zoom");function m(e,t){return p?new Promise(n=>{u?.interpolate(t?.interpolate==="linear"?nX:tf).transform(oo(p,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function y(){u.on("zoom",null)}async function x(e,t,n){let r=oe(e),o=u?.constrain()(r,t,n);return o&&await m(o),new Promise(e=>e(o))}return u.wheelDelta(oa),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:d,panOnScrollMode:m,panOnScrollSpeed:x,preventScrolling:v,zoomOnPinch:b,zoomOnScroll:w,zoomOnDoubleClick:k,zoomActivationKeyPressed:N,lib:j,onTransformChange:S,connectionInProgress:_,paneClickDistance:M,selectionOnDrag:C}){r&&!c.isZoomingOrPanning&&y();let E=o&&!N&&!r;u.clickDistance(C?1/0:!rc(M)||M<0?0:M);let A=E?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(ot(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();let u=n.property("__zoom").k||1;if(d.ctrlKey&&i){let e=e9(d),t=u*Math.pow(2,oa(d));r.scaleTo(n,t,e,d);return}let p=1===d.deltaMode?20:1,f=o===h.Vertical?0:d.deltaX*p,g=o===h.Horizontal?0:d.deltaY*p;!rm()&&d.shiftKey&&o!==h.Vertical&&(f=d.deltaY*p,g=0),r.translateBy(n,-(f/u)*a,-(g/u)*a,{internal:!0});let m=r9(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(d,m),e.panScrollTimeout=setTimeout(()=>{c?.(d,m),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,s?.(d,m))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:p,d3Zoom:u,panOnScrollMode:m,panOnScrollSpeed:x,zoomOnPinch:b,onPanZoomStart:i,onPanZoom:a,onPanZoomEnd:s}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){let a="wheel"===r.type,i=!t&&a&&!r.ctrlKey,s=ot(r,e);if(r.ctrlKey&&a&&s&&r.preventDefault(),i||s)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:f});if(p.on("wheel.zoom",A,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let o=r9(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:i});u.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{e.usedRightMouseButton=!!(n&&on(t,e.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!a.sourceEvent?.internal&&o?.(a.sourceEvent,r9(a.transform))}}({zoomPanValues:c,panOnDrag:d,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:S});u.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&on(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){let t=r9(i.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(i.sourceEvent,t)},150*!!n)}}}({zoomPanValues:c,panOnDrag:d,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:s,onDraggingChange:l});u.on("end",r)}let I=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:l,lib:c,connectionInProgress:d}){return u=>{let h=e||t,p=n&&u.ctrlKey,f="wheel"===u.type;if(1===u.button&&"mousedown"===u.type&&(ot(u,`${c}-flow__node`)||ot(u,`${c}-flow__edge`)))return!0;if(!r&&!h&&!o&&!a&&!n||i||d&&!f||ot(u,s)&&f||ot(u,l)&&(!f||o&&f&&!e)||!n&&u.ctrlKey&&f)return!1;if(!n&&"touchstart"===u.type&&u.touches?.length>1)return u.preventDefault(),!1;if(!h&&!o&&!p&&f||!r&&("mousedown"===u.type||"touchstart"===u.type)||Array.isArray(r)&&!r.includes(u.button)&&"mousedown"===u.type)return!1;let g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||f)&&g}}({zoomActivationKeyPressed:N,panOnDrag:d,zoomOnScroll:w,panOnScroll:o,zoomOnDoubleClick:k,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:j,connectionInProgress:_});u.filter(I),k?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)},destroy:y,setViewport:async function e(e,t){let n=oe(e);return await m(n,t),new Promise(e=>e(n))},setViewportConstrained:x,getViewport:function(){let e=p?n$(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise(n=>{u?.interpolate(t?.interpolate==="linear"?nX:tf).scaleTo(oo(p,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise(n=>{u?.interpolate(t?.interpolate==="linear"?nX:tf).scaleBy(oo(p,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){u?.scaleExtent(e)},setTranslateExtent:function(e){u?.translateExtent(e)},syncViewport:function(e){if(p){let t=oe(e),n=p.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&u?.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){let t=!rc(e)||e<0?0:e;u?.clickDistance(t)}}}({domNode:_.current,minZoom:d,maxZoom:u,translateExtent:c,viewport:l,onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:r}=S.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:r}=S.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:r}=S.getState();r?.(e,t),n?.(t)}});let{x:e,y:t,zoom:n}=I.current.getViewport();return S.setState({panZoom:I.current,transform:[e,t,n],domNode:_.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),(0,b.useEffect)(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:A,preventScrolling:f,noPanClassName:y,userSelectionActive:M,noWheelClassName:m,lib:C,onTransformChange:z,connectionInProgress:E,selectionOnDrag:N,paneClickDistance:k})},[e,t,n,r,o,a,i,s,A,f,y,M,m,C,z,E,N,k]),(0,v.jsx)("div",{className:"react-flow__renderer",ref:_,style:ao,children:g})}let as=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function al(){let{userSelectionActive:e,userSelectionRect:t}=oj(as,ob);return e&&t?(0,v.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}let ac=(e,t)=>n=>{n.target===t.current&&e?.(n)},ad=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function au({isSelecting:e,selectionKeyPressed:t,selectionMode:n=p.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:a,onSelectionStart:i,onSelectionEnd:s,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:u,onPaneMouseMove:h,onPaneMouseLeave:f,children:g}){let m=oS(),{userSelectionActive:y,elementsSelectable:x,dragging:w,connectionInProgress:k}=oj(ad,ob),N=x&&(e||y),j=(0,b.useRef)(null),S=(0,b.useRef)(),_=(0,b.useRef)(new Set),M=(0,b.useRef)(new Set),C=(0,b.useRef)(!1),E=e=>{if(C.current||k){C.current=!1;return}l?.(e),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},A=!0===r||Array.isArray(r)&&r.includes(0);return(0,v.jsxs)("div",{className:em(["react-flow__pane",{draggable:A,dragging:w,selection:e}]),onClick:N?void 0:ac(E,j),onContextMenu:ac(e=>{Array.isArray(r)&&r?.includes(2)?e.preventDefault():c?.(e)},j),onWheel:ac(d?e=>d(e):void 0,j),onPointerEnter:N?void 0:u,onPointerMove:N?e=>{let{userSelectionRect:r,transform:a,nodeLookup:s,edgeLookup:l,connectionLookup:c,triggerNodeChanges:d,triggerEdgeChanges:u,defaultEdgeOptions:h,resetSelectedElements:f}=m.getState();if(!S.current||!r)return;let{x:g,y:y}=rM(e.nativeEvent,S.current),{startX:x,startY:v}=r;if(!C.current){if(Math.hypot(g-x,y-v)<=(t?0:o))return;f(),i?.(e)}C.current=!0;let b={startX:x,startY:v,x:g<x?g:x,y:y<v?y:v,width:Math.abs(g-x),height:Math.abs(y-v)},w=_.current,k=M.current;_.current=new Set(n2(s,b,a,n===p.Partial,!0).map(e=>e.id)),M.current=new Set;let N=h?.selectable??!0;for(let e of _.current){let t=c.get(e);if(t)for(let{edgeId:e}of t.values()){let t=l.get(e);t&&(t.selectable??N)&&M.current.add(e)}}rw(w,_.current)||d(o1(s,_.current,!0)),rw(k,M.current)||u(o1(l,M.current)),m.setState({userSelectionRect:b,userSelectionActive:!0,nodesSelectionActive:!1})}:h,onPointerUp:N?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!y&&e.target===j.current&&m.getState().userSelectionRect&&E?.(e),m.setState({userSelectionActive:!1,userSelectionRect:null}),C.current&&(s?.(e),m.setState({nodesSelectionActive:_.current.size>0})))}:void 0,onPointerDownCapture:N?n=>{let{domNode:r}=m.getState();if(S.current=r?.getBoundingClientRect(),!S.current)return;let o=n.target===j.current;if(!o&&n.target.closest(".nokey")||!e||!(a&&o||t)||0!==n.button||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),C.current=!1;let{x:i,y:s}=rM(n.nativeEvent,S.current);m.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),o||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:N?e=>{C.current&&(e.stopPropagation(),C.current=!1)}:void 0,onPointerLeave:f,ref:j,style:ao,children:[g,(0,v.jsx)(al,{})]})}function ah({id:e,store:t,unselect:n=!1,nodeRef:r}){let o,{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:l,onError:c}=t.getState(),d=l.get(e);d?(t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&s)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])):c?.("012",(o=e,`Node with id "${o}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function ap({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){let s=oS(),[l,c]=(0,b.useState)(!1),d=(0,b.useRef)();return(0,b.useEffect)(()=>{d.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,h=null,p=!1,f=!1,g=null;return{update:function({noDragClassName:m,handleSelector:y,domNode:x,isSelectable:v,nodeId:b,nodeClickDistance:w=0}){function k({x:e,y:n}){let{nodeLookup:o,nodeExtent:i,snapGrid:l,snapToGrid:c,nodeOrigin:d,onNodeDrag:u,onSelectionDrag:h,onError:p,updateNodePositions:m}=t();a={x:e,y:n};let y=!1,x=s.size>1,v=x&&i?rn(n1(s)):null,w=x&&c?function({dragItems:e,snapGrid:t,x:n,y:r}){let o=e.values().next().value;if(!o)return null;let a={x:n-o.distance.x,y:r-o.distance.y},i=ru(a,t);return{x:i.x-a.x,y:i.y-a.y}}({dragItems:s,snapGrid:l,x:e,y:n}):null;for(let[t,r]of s){if(!o.has(t))continue;let a={x:e-r.distance.x,y:n-r.distance.y};c&&(a=w?{x:Math.round(a.x+w.x),y:Math.round(a.y+w.y)}:ru(a,l));let s=null;if(x&&i&&!r.extent&&v){let{positionAbsolute:e}=r.internals,t=e.x-v.x+i[0][0],n=e.x+r.measured.width-v.x2+i[1][0];s=[[t,e.y-v.y+i[0][1]],[n,e.y+r.measured.height-v.y2+i[1][1]]]}let{position:u,positionAbsolute:h}=n5({nodeId:t,nextPosition:a,nodeLookup:o,nodeExtent:s||i,nodeOrigin:d,onError:p});y=y||r.position.x!==u.x||r.position.y!==u.y,r.position=u,r.internals.positionAbsolute=h}if(f=f||y,y&&(m(s,!0),g&&(r||u||!b&&h))){let[e,t]=r4({nodeId:b,dragItems:s,nodeLookup:o});r?.(g,s,e,t),u?.(g,e,t),b||h?.(g,t)}}async function N(){if(!d)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o){l=!1,cancelAnimationFrame(i);return}let[s,u]=re(c,d,r);(0!==s||0!==u)&&(a.x=(a.x??0)-s/e[2],a.y=(a.y??0)-u/e[2],await n({x:s,y:u})&&k(a)),i=requestAnimationFrame(N)}function j(r){let{nodeLookup:o,multiSelectionActive:i,nodesDraggable:l,transform:c,snapGrid:h,snapToGrid:p,selectNodesOnDrag:f,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:y}=t();u=!0,f&&v||i||!b||o.get(b)?.selected||y(),v&&f&&b&&e?.(b);let x=rk(r.sourceEvent,{transform:c,snapGrid:h,snapToGrid:p,containerBounds:d});if(a=x,(s=function(e,t,n,r){let o=new Map;for(let[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(i,e))&&(i.draggable||t&&void 0===i.draggable)){let t=e.get(a);t&&o.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,x,b)).size>0&&(n||g||!b&&m)){let[e,t]=r4({nodeId:b,dragItems:s,nodeLookup:o});n?.(r.sourceEvent,s,e,t),g?.(r.sourceEvent,e,t),b||m?.(r.sourceEvent,t)}}h=e7(x);let S=th().clickDistance(w).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:i,snapToGrid:s}=t();d=n?.getBoundingClientRect()||null,p=!1,f=!1,g=e.sourceEvent,0===r&&j(e),a=rk(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s,containerBounds:d}),c=rM(e.sourceEvent,d)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:i,nodeDragThreshold:h,nodeLookup:f}=t(),m=rk(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:i,containerBounds:d});if(g=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!f.has(b))&&(p=!0),!p){if(!l&&n&&u&&(l=!0,N()),!u){let t=rM(e.sourceEvent,d),n=t.x-c.x,r=t.y-c.y;Math.sqrt(n*n+r*r)>h&&j(e)}(a.x!==m.xSnapped||a.y!==m.ySnapped)&&s&&u&&(c=rM(e.sourceEvent,d),k(m))}}).on("end",e=>{if(u&&!p&&(l=!1,u=!1,cancelAnimationFrame(i),s.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:a,onSelectionDragStop:i}=t();if(f&&(r(s,!1),f=!1),o||a||!b&&i){let[t,r]=r4({nodeId:b,dragItems:s,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,s,t,r),a?.(e.sourceEvent,t,r),b||i?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!m||!r2(t,`.${m}`,x))&&(!y||r2(t,y,x))});h.call(S)},destroy:function(){h?.on(".drag",null)}}}({getStoreItems:()=>s.getState(),onNodeMouseDown:t=>{ah({id:t,store:s,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),(0,b.useEffect)(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{d.current?.destroy()}},[n,r,t,a,e,o]),l}function af(){let e=oS();return(0,b.useCallback)(t=>{let{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=e=>e.selected&&(e.draggable||a&&void 0===e.draggable),h=r?o[0]:5,p=r?o[1]:5,f=t.direction.x*h*t.factor,g=t.direction.y*p*t.factor;for(let[,e]of l){if(!u(e))continue;let t={x:e.internals.positionAbsolute.x+f,y:e.internals.positionAbsolute.y+g};r&&(t=ru(t,o));let{position:a,positionAbsolute:s}=n5({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:i});e.position=a,e.internals.positionAbsolute=s,d.set(e.id,e)}s(d)},[])}let ag=(0,b.createContext)(null),am=ag.Provider;ag.Consumer;let ay=()=>(0,b.useContext)(ag),ax=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),av=(0,b.memo)(o3(function({type:e="source",position:t=m.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:l,className:c,onMouseDown:d,onTouchStart:h,...p},f){let g=i||null,y="target"===e,x=oS(),b=ay(),{connectOnClick:w,noPanClassName:k,rfId:N}=oj(ax,ob),{connectingFrom:j,connectingTo:S,clickConnecting:_,isPossibleEndHandle:M,connectionInProcess:C,clickConnectionInProcess:E,valid:A}=oj(t=>{let{connectionClickStartHandle:n,connectionMode:r,connection:o}=t,{fromHandle:a,toHandle:i,isValid:s}=o,l=i?.nodeId===b&&i?.id===g&&i?.type===e;return{connectingFrom:a?.nodeId===b&&a?.id===g&&a?.type===e,connectingTo:l,clickConnecting:n?.nodeId===b&&n?.id===g&&n?.type===e,isPossibleEndHandle:r===u.Strict?a?.type!==e:b!==a?.nodeId||g!==a?.id,connectionInProcess:!!a,clickConnectionInProcess:!!n,valid:l&&s}},ob);b||x.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let I=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=x.getState(),o={...t,...e};if(r){let{edges:e,setEdges:t}=x.getState();t(((e,t,n={})=>{let r,o;if(!e.source||!e.target)return rd("006","Can't create edge. An edge needs a source and a target."),t;let a=n.getEdgeId||rT;return(o=r=nQ(e)?{...e}:{...e,id:a(e)},t.some(e=>e.source===o.source&&e.target===o.target&&(e.sourceHandle===o.sourceHandle||!e.sourceHandle&&!o.sourceHandle)&&(e.targetHandle===o.targetHandle||!e.targetHandle&&!o.targetHandle)))?t:(null===r.sourceHandle&&delete r.sourceHandle,null===r.targetHandle&&delete r.targetHandle,t.concat(r))})(o,e))}n?.(o),s?.(o)},z=e=>{if(!b)return;let t="clientX"in e.nativeEvent;if(o&&(t&&0===e.button||!t)){let t=x.getState();r7(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:y,handleId:g,nodeId:b,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:I,isValidConnection:n||t.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?d?.(e):h?.(e)};return(0,v.jsx)("div",{"data-handleid":g,"data-nodeid":b,"data-handlepos":t,"data-id":`${N}-${b}-${g}-${e}`,className:em(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,c,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:a,clickconnecting:_,connectingfrom:j,connectingto:S,valid:A,connectionindicator:r&&(!C||M)&&(C||E?a:o)}]),onMouseDown:z,onTouchStart:z,onClick:w?t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:i,connectionMode:s,isValidConnection:l,lib:c,rfId:d,nodeLookup:u,connection:h}=x.getState();if(!b||!i&&!o)return;if(!i){r?.(t.nativeEvent,{nodeId:b,handleId:g,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:b,type:e,id:g}});return}let p=rj(t.target),f=n||l,{connection:m,isValid:y}=r8(t.nativeEvent,{handle:{nodeId:b,id:g,type:e},connectionMode:s,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:f,flowId:d,doc:p,lib:c,nodeLookup:u});y&&m&&I(m);let v=structuredClone(h);delete v.inProgress,v.toPosition=v.toHandle?v.toHandle.position:null,a?.(t,v),x.setState({connectionClickStartHandle:null})}:void 0,ref:f,...p,children:l})})),ab={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},aw={input:function({data:e,isConnectable:t,sourcePosition:n=m.Bottom}){return(0,v.jsxs)(v.Fragment,{children:[e?.label,(0,v.jsx)(av,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=m.Top,sourcePosition:r=m.Bottom}){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(av,{type:"target",position:n,isConnectable:t}),e?.label,(0,v.jsx)(av,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=m.Top}){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(av,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},ak=e=>{let{width:t,height:n,x:r,y:o}=n1(e.nodeLookup,{filter:e=>!!e.selected});return{width:rc(t)?t:null,height:rc(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function aN({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=oS(),{width:o,height:a,transformString:i,userSelectionActive:s}=oj(ak,ob),l=af(),c=(0,b.useRef)(null);if((0,b.useEffect)(()=>{n||c.current?.focus({preventScroll:!0})},[n]),ap({nodeRef:c}),s||!o||!a)return null;let d=e?t=>{e(t,r.getState().nodes.filter(e=>e.selected))}:void 0;return(0,v.jsx)("div",{className:em(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:(0,v.jsx)("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(ab,e.key)&&(e.preventDefault(),l({direction:ab[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:a}})})}let aj="u">typeof window?window:void 0,aS=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function a_({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:u,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:f,panActivationKeyCode:g,zoomActivationKeyCode:m,elementsSelectable:y,zoomOnScroll:x,zoomOnPinch:w,panOnScroll:k,panOnScrollSpeed:N,panOnScrollMode:j,zoomOnDoubleClick:S,panOnDrag:_,defaultViewport:M,translateExtent:C,minZoom:E,maxZoom:A,preventScrolling:I,onSelectionContextMenu:z,noWheelClassName:P,noPanClassName:T,disableKeyboardA11y:$,onViewportChange:D,isControlledViewport:O}){let{nodesSelectionActive:R,userSelectionActive:L}=oj(aS,ob),B=oG(c,{target:aj}),V=oG(g,{target:aj}),H=V||_,Z=V||k,F=d&&!0!==H,X=B||L||F;return!function({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=oS(),{deleteElements:r}=at(),o=oG(e,{actInsideInputWithModifier:!1}),a=oG(t,{target:ar});(0,b.useEffect)(()=>{if(o){let{edges:e,nodes:t}=n.getState();r({nodes:t.filter(an),edges:e.filter(an)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,b.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])}({deleteKeyCode:l,multiSelectionKeyCode:f}),(0,v.jsx)(ai,{onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:x,zoomOnPinch:w,panOnScroll:Z,panOnScrollSpeed:N,panOnScrollMode:j,zoomOnDoubleClick:S,panOnDrag:!B&&H,defaultViewport:M,translateExtent:C,minZoom:E,maxZoom:A,zoomActivationKeyCode:m,preventScrolling:I,noWheelClassName:P,noPanClassName:T,onViewportChange:D,isControlledViewport:O,paneClickDistance:s,selectionOnDrag:F,children:(0,v.jsxs)(au,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:H,isSelecting:!!X,selectionMode:u,selectionKeyPressed:B,paneClickDistance:s,selectionOnDrag:F,children:[e,R&&(0,v.jsx)(aN,{onSelectionContextMenu:z,noPanClassName:T,disableKeyboardA11y:$})]})})}a_.displayName="FlowRenderer";let aM=(0,b.memo)(a_),aC=e=>e.updateNodeInternals;var aE=(0,b.memo)(function({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:u,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:f,rfId:g,nodeTypes:m,nodeClickDistance:y,onError:x}){let w,{node:k,internals:N,isParent:j}=oj(t=>{let n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},ob),S=k.type||"default",_=m?.[S]||aw[S];void 0===_&&(x?.("003",(w=S,`Node type "${w}" not found. Using fallback type "default".`)),S="default",_=m?.default||aw.default);let M=!!(k.draggable||s&&void 0===k.draggable),C=!!(k.selectable||l&&void 0===k.selectable),E=!!(k.connectable||c&&void 0===k.connectable),A=!!(k.focusable||d&&void 0===k.focusable),I=oS(),z=rv(k),P=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){let o=oS(),a=(0,b.useRef)(null),i=(0,b.useRef)(null),s=(0,b.useRef)(e.sourcePosition),l=(0,b.useRef)(e.targetPosition),c=(0,b.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,b.useEffect)(()=>{!a.current||e.hidden||d&&i.current===a.current||(i.current&&r?.unobserve(i.current),r?.observe(a.current),i.current=a.current)},[d,e.hidden]),(0,b.useEffect)(()=>()=>{i.current&&(r?.unobserve(i.current),i.current=null)},[]),(0,b.useEffect)(()=>{if(a.current){let n=c.current!==t,r=s.current!==e.sourcePosition,i=l.current!==e.targetPosition;(n||r||i)&&(c.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}({node:k,nodeType:S,hasDimensions:z,resizeObserver:u}),T=ap({nodeRef:P,disabled:k.hidden||!M,noDragClassName:h,handleSelector:k.dragHandle,nodeId:e,isSelectable:C,nodeClickDistance:y}),$=af();if(k.hidden)return null;let D=rx(k),O=void 0===k.internals.handleBounds?{width:k.width??k.initialWidth??k.style?.width,height:k.height??k.initialHeight??k.style?.height}:{width:k.width??k.style?.width,height:k.height??k.style?.height},R=C||M||t||n||r||o,L=n?e=>n(e,{...N.userNode}):void 0,B=r?e=>r(e,{...N.userNode}):void 0,V=o?e=>o(e,{...N.userNode}):void 0,H=a?e=>a(e,{...N.userNode}):void 0,Z=i?e=>i(e,{...N.userNode}):void 0;return(0,v.jsx)("div",{className:em(["react-flow__node",`react-flow__node-${S}`,{[p]:M},k.className,{selected:k.selected,selectable:C,parent:j,draggable:M,dragging:T}]),ref:P,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:z?"visible":"hidden",...k.style,...O},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:L,onMouseMove:B,onMouseLeave:V,onContextMenu:H,onClick:n=>{let{selectNodesOnDrag:r,nodeDragThreshold:o}=I.getState();C&&(!r||!M||o>0)&&ah({id:e,store:I,nodeRef:P}),t&&t(n,{...N.userNode})},onDoubleClick:Z,onKeyDown:A?t=>{if(!r_(t.nativeEvent)&&!f){if(nY.includes(t.key)&&C)ah({id:e,store:I,unselect:"Escape"===t.key,nodeRef:P});else if(M&&k.selected&&Object.prototype.hasOwnProperty.call(ab,t.key)){t.preventDefault();let{ariaLabelConfig:e}=I.getState();I.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),$({direction:ab[t.key],factor:t.shiftKey?4:1})}}}:void 0,tabIndex:A?0:void 0,onFocus:A?()=>{if(f||!P.current?.matches(":focus-visible"))return;let{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:a}=I.getState();!o||n2(new Map([[e,k]]),{x:0,y:0,width:n,height:r},t,!0).length>0||a(k.position.x+D.width/2,k.position.y+D.height/2,{zoom:t[2]})}:void 0,role:k.ariaRole??(A?"group":void 0),"aria-roledescription":"node","aria-describedby":f?void 0:`${oC}-${g}`,"aria-label":k.ariaLabel,...k.domAttributes,children:(0,v.jsx)(am,{value:e,children:(0,v.jsx)(_,{id:e,data:k.data,type:S,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:k.selected??!1,selectable:C,draggable:M,deletable:k.deletable??!0,isConnectable:E,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:T,dragHandle:k.dragHandle,zIndex:N.z,parentId:k.parentId,...D})})})});let aA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function aI(e){var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,onError:i}=oj(aA,ob),s=(t=e.onlyRenderVisibleElements,oj((0,b.useCallback)(e=>t?n2(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(e=>e.id):Array.from(e.nodeLookup.keys()),[t]),ob)),l=function(){let e=oj(aC),[t]=(0,b.useState)(()=>"u"<typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,b.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,v.jsx)("div",{className:"react-flow__nodes",style:ao,children:s.map(t=>(0,v.jsx)(aE,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:i},t))})}aI.displayName="NodeRenderer";let az=(0,b.memo)(aI),aP={[g.Arrow]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e}};return(0,v.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[g.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,v.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},aT=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{let l,c=(l=oS(),(0,b.useMemo)(()=>{let e;return Object.prototype.hasOwnProperty.call(aP,t)?aP[t]:(l.getState().onError?.("009",(e=t,`Marker type "${e}" doesn't exist.`)),null)},[t]));return c?(0,v.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:(0,v.jsx)(c,{color:n,strokeWidth:i})}):null},a$=({defaultColor:e,rfId:t})=>{let n=oj(e=>e.edges),r=oj(e=>e.defaultEdgeOptions),o=(0,b.useMemo)(()=>(function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){let a=new Set;return e.reduce((e,i)=>([i.markerStart||r,i.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){let o=rF(r,t);a.has(o)||(e.push({id:o,color:r.color||n,...r}),a.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))})(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return o.length?(0,v.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,v.jsx)("defs",{children:o.map(e=>(0,v.jsx)(aT,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};a$.displayName="MarkerDefinitions";var aD=(0,b.memo)(a$);function aO({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:a,labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...d}){let[u,h]=(0,b.useState)({x:1,y:0,width:0,height:0}),p=em(["react-flow__edge-textwrapper",c]),f=(0,b.useRef)(null);return((0,b.useEffect)(()=>{if(f.current){let e=f.current.getBBox();h({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n)?(0,v.jsxs)("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:p,visibility:u.width?"visible":"hidden",...d,children:[o&&(0,v.jsx)("rect",{width:u.width+2*i[0],x:-i[0],y:-i[1],height:u.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),(0,v.jsx)("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:f,style:r,children:n}),l]}):null}aO.displayName="EdgeText";let aR=(0,b.memo)(aO);function aL({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:s,labelBgBorderRadius:l,interactionWidth:c=20,...d}){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("path",{...d,d:e,fill:"none",className:em(["react-flow__edge-path",d.className])}),c?(0,v.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&rc(t)&&rc(n)?(0,v.jsx)(aR,{x:t,y:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:s,labelBgBorderRadius:l}):null]})}function aB({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===m.Left||e===m.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function aV({sourceX:e,sourceY:t,sourcePosition:n=m.Bottom,targetX:r,targetY:o,targetPosition:a=m.Top}){let[i,s]=aB({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=aB({pos:a,x1:r,y1:o,x2:e,y2:t}),[d,u,h,p]=rE({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${s} ${l},${c} ${r},${o}`,d,u,h,p]}function aH(e){return(0,b.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i,targetPosition:s,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:f,markerEnd:g,markerStart:m,interactionWidth:y})=>{let[x,b,w]=aV({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),k=e.isInternal?void 0:t;return(0,v.jsx)(aL,{id:k,path:x,labelX:b,labelY:w,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:f,markerEnd:g,markerStart:m,interactionWidth:y})})}let aZ=aH({isInternal:!1}),aF=aH({isInternal:!0});function aX(e){return(0,b.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,sourcePosition:p=m.Bottom,targetPosition:f=m.Top,markerEnd:g,markerStart:y,pathOptions:x,interactionWidth:b})=>{let[w,k,N]=rL({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:a,targetPosition:f,borderRadius:x?.borderRadius,offset:x?.offset,stepPosition:x?.stepPosition}),j=e.isInternal?void 0:t;return(0,v.jsx)(aL,{id:j,path:w,labelX:k,labelY:N,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:g,markerStart:y,interactionWidth:b})})}aZ.displayName="SimpleBezierEdge",aF.displayName="SimpleBezierEdgeInternal";let aq=aX({isInternal:!1}),aY=aX({isInternal:!0});function aK(e){return(0,b.memo)(({id:t,...n})=>{let r=e.isInternal?void 0:t;return(0,v.jsx)(aq,{...n,id:r,pathOptions:(0,b.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}aq.displayName="SmoothStepEdge",aY.displayName="SmoothStepEdgeInternal";let aW=aK({isInternal:!1}),aG=aK({isInternal:!0});function aU(e){return(0,b.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:p,markerStart:f,interactionWidth:g})=>{let[m,y,x]=r$({sourceX:n,sourceY:r,targetX:o,targetY:a}),b=e.isInternal?void 0:t;return(0,v.jsx)(aL,{id:b,path:m,labelX:y,labelY:x,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:p,markerStart:f,interactionWidth:g})})}aW.displayName="StepEdge",aG.displayName="StepEdgeInternal";let aQ=aU({isInternal:!1}),aJ=aU({isInternal:!0});function a0(e){return(0,b.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=m.Bottom,targetPosition:s=m.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:f,markerEnd:g,markerStart:y,pathOptions:x,interactionWidth:b})=>{let[w,k,N]=rz({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:x?.curvature}),j=e.isInternal?void 0:t;return(0,v.jsx)(aL,{id:j,path:w,labelX:k,labelY:N,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:f,markerEnd:g,markerStart:y,interactionWidth:b})})}aQ.displayName="StraightEdge",aJ.displayName="StraightEdgeInternal";let a1=a0({isInternal:!1}),a2=a0({isInternal:!0});a1.displayName="BezierEdge",a2.displayName="BezierEdgeInternal";let a4={default:a2,straight:aJ,step:aG,smoothstep:aY,simplebezier:aF},a5={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},a3="react-flow__edgeupdater";function a6({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return(0,v.jsx)("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:em([a3,`${a3}-${s}`]),cx:e===m.Left?t-r:e===m.Right?t+r:t,cy:e===m.Top?n-r:e===m.Bottom?n+r:n,r:r,stroke:"transparent",fill:"transparent"})}function a8({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:u,setReconnecting:h,setUpdateHover:p}){let f=oS(),g=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:r,domNode:o,isValidConnection:a,connectionMode:i,connectionRadius:s,lib:l,onConnectStart:p,onConnectEnd:g,cancelConnection:m,nodeLookup:y,rfId:x,panBy:v,updateConnection:b}=f.getState(),w="target"===t.type;r7(e.nativeEvent,{autoPanOnConnect:r,connectionMode:i,connectionRadius:s,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:x,cancelConnection:m,panBy:v,isValidConnection:a,onConnect:e=>c?.(n,e),onConnectStart:(r,o)=>{h(!0),d?.(e,n,t.type),p?.(r,o)},onConnectEnd:g,onReconnectEnd:(e,r)=>{h(!1),u?.(e,n,t.type,r)},updateConnection:b,getTransform:()=>f.getState().transform,getFromHandle:()=>f.getState().connection.fromHandle,dragThreshold:f.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},m=()=>p(!0),y=()=>p(!1);return(0,v.jsxs)(v.Fragment,{children:[(!0===e||"source"===e)&&(0,v.jsx)(a6,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:e=>g(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:m,onMouseOut:y,type:"source"}),(!0===e||"target"===e)&&(0,v.jsx)(a6,{position:l,centerX:a,centerY:i,radius:t,onMouseDown:e=>g(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:m,onMouseOut:y,type:"target"})]})}var a7=(0,b.memo)(function({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,reconnectRadius:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:f,rfId:g,edgeTypes:y,noPanClassName:x,onError:w,disableKeyboardA11y:k}){let N,j=oj(t=>t.edgeLookup.get(e)),S=oj(e=>e.defaultEdgeOptions),_=(j=S?{...S,...j}:j).type||"default",M=y?.[_]||a4[_];void 0===M&&(w?.("011",(N=_,`Edge type "${N}" not found. Using fallback type "default".`)),_="default",M=y?.default||a4.default);let C=!!(j.focusable||t&&void 0===j.focusable),E=void 0!==h&&(j.reconnectable||n&&void 0===j.reconnectable),A=!!(j.selectable||r&&void 0===j.selectable),I=(0,b.useRef)(null),[z,P]=(0,b.useState)(!1),[T,$]=(0,b.useState)(!1),D=oS(),{zIndex:O,sourceX:R,sourceY:L,targetX:B,targetY:V,sourcePosition:H,targetPosition:Z}=oj((0,b.useCallback)(t=>{let n=t.nodeLookup.get(j.source),r=t.nodeLookup.get(j.target);if(!n||!r)return{zIndex:j.zIndex,...a5};let o=function(e){let{sourceNode:t,targetNode:n}=e;if(!rB(t)||!rB(n))return null;let r=t.internals.handleBounds||rV(t.handles),o=n.internals.handleBounds||rV(n.handles),a=rZ(r?.source??[],e.sourceHandle),i=rZ(e.connectionMode===u.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!a||!i)return e.onError?.("008",((e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`)(!a?"source":"target",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let s=a?.position||m.Bottom,l=i?.position||m.Top,c=rH(t,a,s),d=rH(n,i,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:l}}({id:e,sourceNode:n,targetNode:r,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:t.connectionMode,onError:w});return{zIndex:function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:a="basic"}){if("manual"===a)return r;let i=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return(o&&n?r+1e3:r)+i}({selected:j.selected,zIndex:j.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect,zIndexMode:t.zIndexMode}),...o||a5}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),ob),F=(0,b.useMemo)(()=>j.markerStart?`url('#${rF(j.markerStart,g)}')`:void 0,[j.markerStart,g]),X=(0,b.useMemo)(()=>j.markerEnd?`url('#${rF(j.markerEnd,g)}')`:void 0,[j.markerEnd,g]);if(j.hidden||null===R||null===L||null===B||null===V)return null;let q=a?e=>{a(e,{...j})}:void 0,Y=i?e=>{i(e,{...j})}:void 0,K=s?e=>{s(e,{...j})}:void 0,W=l?e=>{l(e,{...j})}:void 0,G=c?e=>{c(e,{...j})}:void 0;return(0,v.jsx)("svg",{style:{zIndex:O},children:(0,v.jsxs)("g",{className:em(["react-flow__edge",`react-flow__edge-${_}`,j.className,x,{selected:j.selected,animated:j.animated,inactive:!A&&!o,updating:z,selectable:A}]),onClick:t=>{let{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:a}=D.getState();A&&(D.setState({nodesSelectionActive:!1}),j.selected&&a?(r({nodes:[],edges:[j]}),I.current?.blur()):n([e])),o&&o(t,j)},onDoubleClick:q,onContextMenu:Y,onMouseEnter:K,onMouseMove:W,onMouseLeave:G,onKeyDown:C?t=>{if(!k&&nY.includes(t.key)&&A){let{unselectNodesAndEdges:n,addSelectedEdges:r}=D.getState();"Escape"===t.key?(I.current?.blur(),n({edges:[j]})):r([e])}}:void 0,tabIndex:C?0:void 0,role:j.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===j.ariaLabel?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":C?`${oE}-${g}`:void 0,ref:I,...j.domAttributes,children:[!T&&(0,v.jsx)(M,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:A,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:R,sourceY:L,targetX:B,targetY:V,sourcePosition:H,targetPosition:Z,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:F,markerEnd:X,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),E&&(0,v.jsx)(a8,{edge:j,isReconnectable:E,reconnectRadius:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:f,sourceX:R,sourceY:L,targetX:B,targetY:V,sourcePosition:H,targetPosition:Z,setUpdateHover:P,setReconnecting:$})]})})});let a9=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ie({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:u,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:f,disableKeyboardA11y:g}){let{edgesFocusable:m,edgesReconnectable:y,elementsSelectable:x,onError:w}=oj(a9,ob),k=oj((0,b.useCallback)(e=>{if(!t)return e.edges.map(e=>e.id);let n=[];if(e.width&&e.height)for(let t of e.edges){let r=e.nodeLookup.get(t.source),o=e.nodeLookup.get(t.target);r&&o&&function({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){let a=rt(ra(e),ra(t));return a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1),rs({x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]},rr(a))>0}({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[t]),ob);return(0,v.jsxs)("div",{className:"react-flow__edges",children:[(0,v.jsx)(aD,{defaultColor:e,rfId:n}),k.map(e=>(0,v.jsx)(a7,{id:e,edgesFocusable:m,edgesReconnectable:y,elementsSelectable:x,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:u,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:f,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:g},e))]})}ie.displayName="EdgeRenderer";let it=(0,b.memo)(ie),ir=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function io({children:e}){let t=oj(ir);return(0,v.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}let ia=e=>e.panZoom?.syncViewport;function ii(e){return e.connection.inProgress?{...e.connection,to:rh(e.connection.to,e.transform)}:{...e.connection}}let is=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function il({containerStyle:e,style:t,type:n,component:r}){let{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:l}=oj(is,ob);return a&&o&&l?(0,v.jsx)("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:(0,v.jsx)("g",{className:em(["react-flow__connection",nU(s)]),children:(0,v.jsx)(ic,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}let ic=({style:e,type:t=f.Bezier,CustomComponent:n,isValid:r})=>{let{inProgress:o,from:a,fromNode:i,fromHandle:s,fromPosition:l,to:c,toNode:d,toHandle:u,toPosition:h,pointer:p}=oj(ii,ob);if(!o)return;if(n)return(0,v.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:h,connectionStatus:nU(r),toNode:d,toHandle:u,pointer:p});let g="",m={sourceX:a.x,sourceY:a.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:h};switch(t){case f.Bezier:[g]=rz(m);break;case f.SimpleBezier:[g]=aV(m);break;case f.Step:[g]=rL({...m,borderRadius:0});break;case f.SmoothStep:[g]=rL(m);break;default:[g]=r$(m)}return(0,v.jsx)("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};ic.displayName="ConnectionLine";let id={};function iu(e=id){(0,b.useRef)(e),oS(),(0,b.useEffect)(()=>{},[e])}function ih({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:u,onSelectionStart:h,onSelectionEnd:p,connectionLineType:f,connectionLineStyle:g,connectionLineComponent:m,connectionLineContainerStyle:y,selectionKeyCode:x,selectionOnDrag:w,selectionMode:k,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:S,deleteKeyCode:_,onlyRenderVisibleElements:M,elementsSelectable:C,defaultViewport:E,translateExtent:A,minZoom:I,maxZoom:z,preventScrolling:P,defaultMarkerColor:T,zoomOnScroll:$,zoomOnPinch:D,panOnScroll:O,panOnScrollSpeed:R,panOnScrollMode:L,zoomOnDoubleClick:B,panOnDrag:V,onPaneClick:H,onPaneMouseEnter:Z,onPaneMouseMove:F,onPaneMouseLeave:X,onPaneScroll:q,onPaneContextMenu:Y,paneClickDistance:K,nodeClickDistance:W,onEdgeContextMenu:G,onEdgeMouseEnter:U,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,noDragClassName:eo,noWheelClassName:ea,noPanClassName:ei,disableKeyboardA11y:es,nodeExtent:el,rfId:ec,viewport:ed,onViewportChange:eu}){let eh,ep,ef,eg;return iu(e),iu(t),oS(),(0,b.useRef)(!1),(0,b.useEffect)(()=>{},[]),eh=at(),ep=(0,b.useRef)(!1),(0,b.useEffect)(()=>{!ep.current&&eh.viewportInitialized&&n&&(setTimeout(()=>n(eh),1),ep.current=!0)},[n,eh.viewportInitialized]),ef=oj(ia),eg=oS(),(0,b.useEffect)(()=>{ed&&(ef?.(ed),eg.setState({transform:[ed.x,ed.y,ed.zoom]}))},[ed,ef]),(0,v.jsx)(aM,{onPaneClick:H,onPaneMouseEnter:Z,onPaneMouseMove:F,onPaneMouseLeave:X,onPaneContextMenu:Y,onPaneScroll:q,paneClickDistance:K,deleteKeyCode:_,selectionKeyCode:x,selectionOnDrag:w,selectionMode:k,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:$,zoomOnPinch:D,zoomOnDoubleClick:B,panOnScroll:O,panOnScrollSpeed:R,panOnScrollMode:L,panOnDrag:V,defaultViewport:E,translateExtent:A,minZoom:I,maxZoom:z,onSelectionContextMenu:u,preventScrolling:P,noDragClassName:eo,noWheelClassName:ea,noPanClassName:ei,disableKeyboardA11y:es,onViewportChange:eu,isControlledViewport:!!ed,children:(0,v.jsxs)(io,{children:[(0,v.jsx)(it,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,onlyRenderVisibleElements:M,onEdgeContextMenu:G,onEdgeMouseEnter:U,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:T,noPanClassName:ei,disableKeyboardA11y:es,rfId:ec}),(0,v.jsx)(il,{style:g,type:f,component:m,containerStyle:y}),(0,v.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,v.jsx)(az,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:W,onlyRenderVisibleElements:M,noPanClassName:ei,noDragClassName:eo,disableKeyboardA11y:es,nodeExtent:el,rfId:ec}),(0,v.jsx)("div",{className:"react-flow__viewport-portal"})]})})}ih.displayName="GraphView";let ip=(0,b.memo)(ih),ig=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,fitViewOptions:s,minZoom:l=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:h,zIndexMode:p="basic"}={})=>{let f=new Map,g=new Map,m=new Map,y=new Map,x=r??t??[],v=n??e??[],b=d??[0,0],w=h??nq;r1(m,y,x);let k=rW(v,f,g,{nodeOrigin:b,nodeExtent:w,zIndexMode:p}),N=[0,0,1];if(i&&o&&a){let{x:e,y:t,zoom:n}=rg(n1(f,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),o,a,l,c,s?.padding??.1);N=[e,t,n]}return{rfId:"1",width:o??0,height:a??0,transform:N,nodes:v,nodesInitialized:k,nodeLookup:f,parentLookup:g,edges:x,edgeLookup:y,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:c,translateExtent:nq,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:u.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:s,fitViewResolver:null,connection:{...nW},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:rd,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:nK,zIndexMode:p,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}};function im({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,initialMinZoom:i,initialMaxZoom:s,initialFitViewOptions:l,fitView:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h,children:p}){let[f]=(0,b.useState)(()=>(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h})=>{let p,f;return p=(p,f)=>{async function g(){let{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:a,minZoom:i,maxZoom:s}=f();t&&(await n4({nodes:e,width:o,height:a,panZoom:t,minZoom:i,maxZoom:s},n),r?.resolve(!0),p({fitViewResolver:null}))}return{...ig({nodes:e,edges:t,width:o,height:a,fitView:i,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:u,defaultNodes:n,defaultEdges:r,zIndexMode:h}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:a,zIndexMode:i}=f(),s=rW(e,t,n,{nodeOrigin:r,nodeExtent:u,elevateNodesOnSelect:o,checkEquality:!0,zIndexMode:i});a&&s?(g(),p({nodes:e,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:e,nodesInitialized:s})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=f();r1(t,n,e),p({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=f();t(e),p({hasDefaultNodes:!0})}if(t){let{setEdges:e}=f();e(t),p({hasDefaultEdges:!0})}},updateNodeInternals:e=>{let{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:a,nodeExtent:i,debug:s,fitViewQueued:l,zIndexMode:c}=f(),{changes:d,updatedInternals:u}=function(e,t,n,r,o,a,i){let s=r?.querySelector(".xyflow__viewport"),l=!1;if(!s)return{changes:[],updatedInternals:l};let c=[],d=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(d.transform),h=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}let s=rN(r.nodeElement),d=e.measured.width!==s.width||e.measured.height!==s.height;if(s.width&&s.height&&(d||!e.internals.handleBounds||r.force)){let p=r.nodeElement.getBoundingClientRect(),f=ry(e.extent)?e.extent:a,{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=n7(g,s,t.get(e.parentId)):f&&(g=n8(g,f,s));let m={...e,measured:s,internals:{...e.internals,positionAbsolute:g,handleBounds:{source:rC("source",r.nodeElement,p,u,e.id),target:rC("target",r.nodeElement,p,u,e.id)}}};t.set(e.id,m),e.parentId&&rG(m,t,n,{nodeOrigin:o,zIndexMode:i}),l=!0,d&&(c.push({id:e.id,type:"dimensions",dimensions:s}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:ro(m,o)}))}}if(h.length>0){let e=rQ(h,t,n,o);c.push(...e)}return{changes:c,updatedInternals:l}}(e,n,r,o,a,i,c);u&&(!function(e,t,n){let r=rY(rX,n);for(let n of e.values())if(n.parentId)rG(n,e,t,r);else{let e=n8(n0(n,r.nodeOrigin),ry(n.extent)?n.extent:r.nodeExtent,rx(n));n.internals.positionAbsolute=e}}(n,r,{nodeOrigin:a,nodeExtent:i,zIndexMode:c}),l?(g(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),d?.length>0&&(s&&console.log("React Flow: trigger node changes",d),t?.(d)))},updateNodePositions:(e,t=!1)=>{let n=[],r=[],{nodeLookup:o,triggerNodeChanges:a,connection:i,updateConnection:s,onNodesChangeMiddlewareMap:l}=f();for(let[a,l]of e){let e=o.get(a),c=!!(e?.expandParent&&e?.parentId&&l?.position),d={id:a,type:"position",position:c?{x:Math.max(0,l.position.x),y:Math.max(0,l.position.y)}:l.position,dragging:t};if(e&&i.inProgress&&i.fromNode.id===e.id){let t=rH(e,i.fromHandle,m.Left,!0);s({...i,from:t})}c&&e.parentId&&n.push({id:a,parentId:e.parentId,rect:{...l.internals.positionAbsolute,width:l.measured.width??0,height:l.measured.height??0}}),r.push(d)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=f(),a=rQ(n,o,e,t);r.push(...a)}for(let e of l.values())r=e(r);a(r)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:a}=f();e?.length&&(o&&n(oJ(e,r)),a&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:a}=f();e?.length&&(o&&n(oJ(e,r)),a&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:a}=f();t?o(e.map(e=>o0(e,!0))):(o(o1(r,new Set([...e]),!0)),a(o1(n)))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:a}=f();t?a(e.map(e=>o0(e,!0))):(a(o1(n,new Set([...e]))),o(o1(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:a,triggerEdgeChanges:i}=f(),s=(e||r).map(e=>{let t=o.get(e.id);return t&&(t.selected=!1),o0(e.id,!1)}),l=(t||n).map(e=>o0(e.id,!1));a(s),i(l)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=f();t?.setScaleExtent([e,n]),p({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=f();t?.setScaleExtent([n,e]),p({maxZoom:e})},setTranslateExtent:e=>{f().panZoom?.setTranslateExtent(e),p({translateExtent:e})},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=f();if(!o)return;let a=t.reduce((e,t)=>t.selected?[...e,o0(t.id,!1)]:e,[]),i=e.reduce((e,t)=>t.selected?[...e,o0(t.id,!1)]:e,[]);n(a),r(i)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:a,nodeExtent:i,zIndexMode:s}=f();(e[0][0]!==i[0][0]||e[0][1]!==i[0][1]||e[1][0]!==i[1][0]||e[1][1]!==i[1][1])&&(rW(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:a,checkEquality:!1,zIndexMode:s}),p({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:r,panZoom:o,translateExtent:a}=f();return rJ({delta:e,panZoom:o,transform:t,translateExtent:a,width:n,height:r})},setCenter:async(e,t,n)=>{let{width:r,height:o,maxZoom:a,panZoom:i}=f();if(!i)return Promise.resolve(!1);let s=void 0!==n?.zoom?n.zoom:a;return await i.setViewport({x:r/2-e*s,y:o/2-t*s,zoom:s},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...nW}})},updateConnection:e=>{p({connection:e})},reset:()=>p({...ig()})}},f=Object.is,p?ov(p,f):ov})({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:c,minZoom:i,maxZoom:s,fitViewOptions:l,nodeOrigin:d,nodeExtent:u,zIndexMode:h}));return(0,v.jsx)(ok,{value:f,children:(0,v.jsx)(o9,{children:p})})}function iy({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,fitViewOptions:l,minZoom:c,maxZoom:d,nodeOrigin:u,nodeExtent:h,zIndexMode:p}){return(0,b.useContext)(ow)?(0,v.jsx)(v.Fragment,{children:e}):(0,v.jsx)(im,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:d,nodeOrigin:u,nodeExtent:h,zIndexMode:p,children:e})}let ix={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var iv=o3(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:g,onConnect:m,onConnectStart:y,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:k,onNodeMouseEnter:N,onNodeMouseMove:j,onNodeMouseLeave:S,onNodeContextMenu:_,onNodeDoubleClick:M,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:A,onNodesDelete:I,onEdgesDelete:z,onDelete:P,onSelectionChange:T,onSelectionDragStart:$,onSelectionDrag:D,onSelectionDragStop:O,onSelectionContextMenu:R,onSelectionStart:L,onSelectionEnd:B,onBeforeDelete:V,connectionMode:H,connectionLineType:Z=f.Bezier,connectionLineStyle:F,connectionLineComponent:X,connectionLineContainerStyle:q,deleteKeyCode:Y="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:W=!1,selectionMode:G=p.Full,panActivationKeyCode:U="Space",multiSelectionKeyCode:Q=rm()?"Meta":"Control",zoomActivationKeyCode:J=rm()?"Meta":"Control",snapToGrid:ee,snapGrid:et,onlyRenderVisibleElements:en=!1,selectNodesOnDrag:er,nodesDraggable:eo,autoPanOnNodeFocus:ea,nodesConnectable:ei,nodesFocusable:es,nodeOrigin:el=oH,edgesFocusable:ec,edgesReconnectable:ed,elementsSelectable:eu=!0,defaultViewport:eh=oZ,minZoom:ep=.5,maxZoom:ef=2,translateExtent:eg=nq,preventScrolling:ey=!0,nodeExtent:ex,defaultMarkerColor:ev="#b1b1b7",zoomOnScroll:eb=!0,zoomOnPinch:ew=!0,panOnScroll:ek=!1,panOnScrollSpeed:eN=.5,panOnScrollMode:ej=h.Free,zoomOnDoubleClick:eS=!0,panOnDrag:e_=!0,onPaneClick:eM,onPaneMouseEnter:eC,onPaneMouseMove:eE,onPaneMouseLeave:eA,onPaneScroll:eI,onPaneContextMenu:ez,paneClickDistance:eP=1,nodeClickDistance:eT=0,children:e$,onReconnect:eD,onReconnectStart:eO,onReconnectEnd:eR,onEdgeContextMenu:eL,onEdgeDoubleClick:eB,onEdgeMouseEnter:eV,onEdgeMouseMove:eH,onEdgeMouseLeave:eZ,reconnectRadius:eF=10,onNodesChange:eX,onEdgesChange:eq,noDragClassName:eY="nodrag",noWheelClassName:eK="nowheel",noPanClassName:eW="nopan",fitView:eG,fitViewOptions:eU,connectOnClick:eQ,attributionPosition:eJ,proOptions:e0,defaultEdgeOptions:e1,elevateNodesOnSelect:e2=!0,elevateEdgesOnSelect:e4=!1,disableKeyboardA11y:e5=!1,autoPanOnConnect:e3,autoPanOnNodeDrag:e6,autoPanSpeed:e8,connectionRadius:e7,isValidConnection:e9,onError:te,style:tt,id:tn,nodeDragThreshold:tr,connectionDragThreshold:to,viewport:ta,onViewportChange:ti,width:ts,height:tl,colorMode:tc="light",debug:td,onScroll:tu,ariaLabelConfig:th,zIndexMode:tp="basic",...tf},tg){let tm=tn||"1",ty=function(e){let[t,n]=(0,b.useState)("system"===e?null:e);return(0,b.useEffect)(()=>{if("system"!==e)return void n(e);let t=oK(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:oK()?.matches?"dark":"light"}(tc),tx=(0,b.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),tu?.(e)},[tu]);return(0,v.jsx)("div",{"data-testid":"rf__wrapper",...tf,onScroll:tx,style:{...tt,...ix},ref:tg,className:em(["react-flow",o,ty]),id:tn,role:"application",children:(0,v.jsxs)(iy,{nodes:e,edges:t,width:ts,height:tl,fitView:eG,fitViewOptions:eU,minZoom:ep,maxZoom:ef,nodeOrigin:el,nodeExtent:ex,zIndexMode:tp,children:[(0,v.jsx)(ip,{onInit:c,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:N,onNodeMouseMove:j,onNodeMouseLeave:S,onNodeContextMenu:_,onNodeDoubleClick:M,nodeTypes:a,edgeTypes:i,connectionLineType:Z,connectionLineStyle:F,connectionLineComponent:X,connectionLineContainerStyle:q,selectionKeyCode:K,selectionOnDrag:W,selectionMode:G,deleteKeyCode:Y,multiSelectionKeyCode:Q,panActivationKeyCode:U,zoomActivationKeyCode:J,onlyRenderVisibleElements:en,defaultViewport:eh,translateExtent:eg,minZoom:ep,maxZoom:ef,preventScrolling:ey,zoomOnScroll:eb,zoomOnPinch:ew,zoomOnDoubleClick:eS,panOnScroll:ek,panOnScrollSpeed:eN,panOnScrollMode:ej,panOnDrag:e_,onPaneClick:eM,onPaneMouseEnter:eC,onPaneMouseMove:eE,onPaneMouseLeave:eA,onPaneScroll:eI,onPaneContextMenu:ez,paneClickDistance:eP,nodeClickDistance:eT,onSelectionContextMenu:R,onSelectionStart:L,onSelectionEnd:B,onReconnect:eD,onReconnectStart:eO,onReconnectEnd:eR,onEdgeContextMenu:eL,onEdgeDoubleClick:eB,onEdgeMouseEnter:eV,onEdgeMouseMove:eH,onEdgeMouseLeave:eZ,reconnectRadius:eF,defaultMarkerColor:ev,noDragClassName:eY,noWheelClassName:eK,noPanClassName:eW,rfId:tm,disableKeyboardA11y:e5,nodeExtent:ex,viewport:ta,onViewportChange:ti}),(0,v.jsx)(oY,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:y,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:k,nodesDraggable:eo,autoPanOnNodeFocus:ea,nodesConnectable:ei,nodesFocusable:es,edgesFocusable:ec,edgesReconnectable:ed,elementsSelectable:eu,elevateNodesOnSelect:e2,elevateEdgesOnSelect:e4,minZoom:ep,maxZoom:ef,nodeExtent:ex,onNodesChange:eX,onEdgesChange:eq,snapToGrid:ee,snapGrid:et,connectionMode:H,translateExtent:eg,connectOnClick:eQ,defaultEdgeOptions:e1,fitView:eG,fitViewOptions:eU,onNodesDelete:I,onEdgesDelete:z,onDelete:P,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:A,onSelectionDrag:D,onSelectionDragStart:$,onSelectionDragStop:O,onMove:d,onMoveStart:u,onMoveEnd:g,noPanClassName:eW,nodeOrigin:el,rfId:tm,autoPanOnConnect:e3,autoPanOnNodeDrag:e6,autoPanSpeed:e8,onError:te,connectionRadius:e7,isValidConnection:e9,selectNodesOnDrag:er,nodeDragThreshold:tr,connectionDragThreshold:to,onBeforeDelete:V,debug:td,ariaLabelConfig:th,zIndexMode:tp}),(0,v.jsx)(oV,{onSelectionChange:T}),e$,(0,v.jsx)(o$,{proOptions:e0,position:eJ}),(0,v.jsx)(oP,{rfId:tm,disableKeyboardA11y:e5})]})})});function ib({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,v.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:em(["react-flow__background-pattern",n,r])})}function iw({radius:e,className:t}){return(0,v.jsx)("circle",{cx:e,cy:e,r:e,className:em(["react-flow__background-pattern","dots",t])})}(c=x||(x={})).Lines="lines",c.Dots="dots",c.Cross="cross";let ik={[x.Dots]:1,[x.Lines]:1,[x.Cross]:6},iN=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ij({id:e,variant:t=x.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:l,className:c,patternClassName:d}){let u=(0,b.useRef)(null),{transform:h,patternId:p}=oj(iN,ob),f=r||ik[t],g=t===x.Dots,m=t===x.Cross,y=Array.isArray(n)?n:[n,n],w=[y[0]*h[2]||1,y[1]*h[2]||1],k=f*h[2],N=Array.isArray(a)?a:[a,a],j=m?[k,k]:w,S=[N[0]*h[2]||1+j[0]/2,N[1]*h[2]||1+j[1]/2],_=`${p}${e||""}`;return(0,v.jsxs)("svg",{className:em(["react-flow__background",c]),style:{...l,...ao,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:u,"data-testid":"rf__background",children:[(0,v.jsx)("pattern",{id:_,x:h[0]%w[0],y:h[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:g?(0,v.jsx)(iw,{radius:k/2,className:d}):(0,v.jsx)(ib,{dimensions:j,lineWidth:o,variant:t,className:d})}),(0,v.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_})`})]})}ij.displayName="Background";let iS=(0,b.memo)(ij);function i_(){return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,v.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function iM(){return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,v.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function iC(){return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,v.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function iE(){return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,v.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function iA(){return(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,v.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function iI({children:e,className:t,...n}){return(0,v.jsx)("button",{type:"button",className:em(["react-flow__controls-button",t]),...n,children:e})}let iz=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function iP({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:l,className:c,children:d,position:u="bottom-left",orientation:h="vertical","aria-label":p}){let f=oS(),{isInteractive:g,minZoomReached:m,maxZoomReached:y,ariaLabelConfig:x}=oj(iz,ob),{zoomIn:b,zoomOut:w,fitView:k}=at();return(0,v.jsxs)(oT,{className:em(["react-flow__controls","horizontal"===h?"horizontal":"vertical",c]),position:u,style:e,"data-testid":"rf__controls","aria-label":p??x["controls.ariaLabel"],children:[t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(iI,{onClick:()=>{b(),a?.()},className:"react-flow__controls-zoomin",title:x["controls.zoomIn.ariaLabel"],"aria-label":x["controls.zoomIn.ariaLabel"],disabled:y,children:(0,v.jsx)(i_,{})}),(0,v.jsx)(iI,{onClick:()=>{w(),i?.()},className:"react-flow__controls-zoomout",title:x["controls.zoomOut.ariaLabel"],"aria-label":x["controls.zoomOut.ariaLabel"],disabled:m,children:(0,v.jsx)(iM,{})})]}),n&&(0,v.jsx)(iI,{className:"react-flow__controls-fitview",onClick:()=>{k(o),s?.()},title:x["controls.fitView.ariaLabel"],"aria-label":x["controls.fitView.ariaLabel"],children:(0,v.jsx)(iC,{})}),r&&(0,v.jsx)(iI,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l?.(!g)},title:x["controls.interactive.ariaLabel"],"aria-label":x["controls.interactive.ariaLabel"],children:g?(0,v.jsx)(iA,{}):(0,v.jsx)(iE,{})}),d]})}iP.displayName="Controls";let iT=(0,b.memo)(iP),i$=(0,b.memo)(function({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:l,className:c,borderRadius:d,shapeRendering:u,selected:h,onClick:p}){let{background:f,backgroundColor:g}=a||{};return(0,v.jsx)("rect",{className:em(["react-flow__minimap-node",{selected:h},c]),x:t,y:n,rx:d,ry:d,width:r,height:o,style:{fill:i||f||g,stroke:s,strokeWidth:l},shapeRendering:u,onClick:p?t=>p(t,e):void 0})}),iD=e=>e.nodes.map(e=>e.id),iO=e=>e instanceof Function?e:()=>e,iR=(0,b.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:l}){let{node:c,x:d,y:u,width:h,height:p}=oj(t=>{let{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:a}=n.positionAbsolute,{width:i,height:s}=rx(r);return{node:r,x:o,y:a,width:i,height:s}},ob);return c&&!c.hidden&&rv(c)?(0,v.jsx)(s,{x:d,y:u,width:h,height:p,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:o,strokeColor:n(c),strokeWidth:a,shapeRendering:i,onClick:l,id:c.id}):null});var iL=(0,b.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=i$,onClick:i}){let s=oj(iD,ob),l=iO(t),c=iO(e),d=iO(n),u="u"<typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,v.jsx)(v.Fragment,{children:s.map(e=>(0,v.jsx)(iR,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:u},e))})});let iB=e=>!e.hidden,iV=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?ri(n1(e.nodeLookup,{filter:iB}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function iH({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:u,position:h="bottom-right",onClick:p,onNodeClick:f,pannable:g=!1,zoomable:m=!1,ariaLabel:y,inversePan:x,zoomStep:w=1,offsetScale:k=5}){let N=oS(),j=(0,b.useRef)(null),{boundingRect:S,viewBB:_,rfId:M,panZoom:C,translateExtent:E,flowWidth:A,flowHeight:I,ariaLabelConfig:z}=oj(iV,ob),P=e?.width??200,T=e?.height??150,$=Math.max(S.width/P,S.height/T),D=$*P,O=$*T,R=k*$,L=S.x-(D-S.width)/2-R,B=S.y-(O-S.height)/2-R,V=D+2*R,H=O+2*R,Z=`react-flow__minimap-desc-${M}`,F=(0,b.useRef)(0),X=(0,b.useRef)();F.current=$,(0,b.useEffect)(()=>{if(j.current&&C)return X.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let o=e7(e);return{update:function({translateExtent:e,width:a,height:i,zoomStep:s=1,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}){let u=[0,0],h=nF().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(u=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?o=>{let s=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;let l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],c=[l[0]-u[0],l[1]-u[1]];u=l;let h=r()*Math.max(s[2],Math.log(s[2]))*(d?-1:1),p={x:s[0]-c[0]*h,y:s[1]-c[1]*h};t.setViewportConstrained({x:p.x,y:p.y,zoom:s[2]},[[0,0],[a,i]],e)}:null).on("zoom.wheel",c?e=>{if("wheel"!==e.sourceEvent.type||!t)return;let r=n(),o=e.sourceEvent.ctrlKey&&rm()?10:1,a=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,i=r[2]*Math.pow(2,a*o);t.scaleTo(i)}:null);o.call(h,{})},destroy:function(){o.on("zoom",null)},pointer:e9}}({domNode:j.current,panZoom:C,getTransform:()=>N.getState().transform,getViewScale:()=>F.current}),()=>{X.current?.destroy()}},[C]),(0,b.useEffect)(()=>{X.current?.update({translateExtent:E,width:A,height:I,inversePan:x,pannable:g,zoomStep:w,zoomable:m})},[g,m,x,w,E,A,I]);let q=p?e=>{let[t,n]=X.current?.pointer(e)||[0,0];p(e,{x:t,y:n})}:void 0,Y=f?(0,b.useCallback)((e,t)=>{f(e,N.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,K=y??z["minimap.ariaLabel"];return(0,v.jsx)(oT,{position:h,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof u?u*$:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof i?i:void 0},className:em(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,v.jsxs)("svg",{width:P,height:T,viewBox:`${L} ${B} ${V} ${H}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:j,onClick:q,children:[K&&(0,v.jsx)("title",{id:Z,children:K}),(0,v.jsx)(iL,{onClick:Y,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),(0,v.jsx)("path",{className:"react-flow__minimap-mask",d:`M${L-R},${B-R}h${V+2*R}v${H+2*R}h${-V-2*R}z
        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}iH.displayName="MiniMap";let iZ=(0,b.memo)(iH),iF={[y.Line]:"right",[y.Handle]:"bottom-right"};(0,b.memo)(function({nodeId:e,position:t,variant:n=y.Handle,className:r,style:o,children:a,color:i,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,resizeDirection:h,autoScale:p=!0,shouldResize:f,onResizeStart:g,onResize:m,onResizeEnd:x}){let w,k=ay(),N="string"==typeof e?e:k,j=oS(),S=(0,b.useRef)(null),_=n===y.Handle,M=oj((0,b.useCallback)((w=_&&p,e=>w?`${Math.max(1/e.transform[2],1)}`:void 0),[_,p]),ob),C=(0,b.useRef)(null),E=t??iF[n];(0,b.useEffect)(()=>{if(S.current&&N)return C.current||(C.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){let a=e7(e),i={controlDirection:oi("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};return{update:function({controlPosition:e,boundaries:s,keepAspectRatio:l,resizeDirection:c,onResizeStart:d,onResize:u,onResizeEnd:h,shouldResize:p}){let f,g,m,y,x={...od},v={...ou};i={boundaries:s,resizeDirection:c,keepAspectRatio:l,controlDirection:oi(e)};let b=null,w=[],k=!1,N=th().on("start",e=>{let{nodeLookup:r,transform:o,snapGrid:a,snapToGrid:i,nodeOrigin:s,paneDomNode:l}=n();if(!(f=r.get(t)))return;b=l?.getBoundingClientRect()??null;let{xSnapped:c,ySnapped:u}=rk(e.sourceEvent,{transform:o,snapGrid:a,snapToGrid:i,containerBounds:b});if(v={...x={width:f.measured.width??0,height:f.measured.height??0,x:f.position.x??0,y:f.position.y??0},pointerX:c,pointerY:u,aspectRatio:x.width/x.height},g=void 0,f.parentId&&("parent"===f.extent||f.expandParent)){var h;m=(g=r.get(f.parentId))&&"parent"===f.extent?[[0,0],[(h=g).measured.width,h.measured.height]]:void 0}for(let[e,n]of(w=[],y=void 0,r))if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){let e=function(e,t,n){let r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,l=n[1]*i;return[[r-s,o-l],[r+a-s,o+i-l]]}(n,f,n.origin??s);y=y?[[Math.min(e[0][0],y[0][0]),Math.min(e[0][1],y[0][1])],[Math.max(e[1][0],y[1][0]),Math.max(e[1][1],y[1][1])]]:e}d?.(e,{...x})}).on("drag",e=>{let{transform:t,snapGrid:o,snapToGrid:a,nodeOrigin:s}=n(),l=rk(e.sourceEvent,{transform:t,snapGrid:o,snapToGrid:a,containerBounds:b}),c=[];if(!f)return;let{x:d,y:h,width:N,height:j}=x,S={},_=f.origin??s,{width:M,height:C,x:E,y:A}=function(e,t,n,r,o,a,i,s){var l,c,d,u;let{affectsX:h,affectsY:p}=t,{isHorizontal:f,isVertical:g}=t,m=f&&g,{xSnapped:y,ySnapped:x}=n,{minWidth:v,maxWidth:b,minHeight:w,maxHeight:k}=r,{x:N,y:j,width:S,height:_,aspectRatio:M}=e,C=Math.floor(f?y-e.pointerX:0),E=Math.floor(g?x-e.pointerY:0),A=S+(h?-C:C),I=_+(p?-E:E),z=-a[0]*S,P=-a[1]*_,T=oc(A,v,b),$=oc(I,w,k);if(i){let e=0,t=0;h&&C<0?e=os(N+C+z,i[0][0]):!h&&C>0&&(e=ol(N+A+z,i[1][0])),p&&E<0?t=os(j+E+P,i[0][1]):!p&&E>0&&(t=ol(j+I+P,i[1][1])),T=Math.max(T,e),$=Math.max($,t)}if(s){let e=0,t=0;h&&C>0?e=ol(N+C,s[0][0]):!h&&C<0&&(e=os(N+A,s[1][0])),p&&E>0?t=ol(j+E,s[0][1]):!p&&E<0&&(t=os(j+I,s[1][1])),T=Math.max(T,e),$=Math.max($,t)}if(o){if(f){(T=Math.max(T,oc(A/M,w,k)*M),i)&&(T=Math.max(T,(h||p)&&(!h||p||!m)?os(j+P+(h?C:-C)/M,i[0][1])*M:ol(j+P+A/M,i[1][1])*M));s&&(T=Math.max(T,(h||p)&&(!h||p||!m)?ol(j+(h?C:-C)/M,s[0][1])*M:os(j+A/M,s[1][1])*M))}if(g){($=Math.max($,oc(I*M,v,b)/M),i)&&($=Math.max($,(h||p)&&(!p||h||!m)?os(N+(p?E:-E)*M+z,i[0][0])/M:ol(N+I*M+z,i[1][0])/M));s&&($=Math.max($,(h||p)&&(!p||h||!m)?ol(N+(p?E:-E)*M,s[0][0])/M:os(N+I*M,s[1][0])/M))}}E+=E<0?$:-$,C+=C<0?T:-T,o&&(m?A>I*M?E=((l=h,c=p,l?!c:c)?-C:C)/M:C=((d=h,u=p,d?!u:u)?-E:E)*M:f?(E=C/M,p=h):(C=E*M,h=p));let D=h?N+C:N,O=p?j+E:j;return{width:S+(h?-C:C),height:_+(p?-E:E),x:a[0]*C*(h?-1:1)+D,y:a[1]*E*(p?-1:1)+O}}(v,i.controlDirection,l,i.boundaries,i.keepAspectRatio,_,m,y),I=M!==N,z=C!==j,P=E!==d&&I,T=A!==h&&z;if(!P&&!T&&!I&&!z)return;if((P||T||1===_[0]||1===_[1])&&(S.x=P?E:x.x,S.y=T?A:x.y,x.x=S.x,x.y=S.y,w.length>0)){let e=E-d,t=A-h;for(let n of w)n.position={x:n.position.x-e+_[0]*(M-N),y:n.position.y-t+_[1]*(C-j)},c.push(n)}if((I||z)&&(S.width=I&&(!i.resizeDirection||"horizontal"===i.resizeDirection)?M:x.width,S.height=z&&(!i.resizeDirection||"vertical"===i.resizeDirection)?C:x.height,x.width=S.width,x.height=S.height),g&&f.expandParent){let e=_[0]*(S.width??0);S.x&&S.x<e&&(x.x=e,v.x=v.x-(S.x-e));let t=_[1]*(S.height??0);S.y&&S.y<t&&(x.y=t,v.y=v.y-(S.y-t))}let $=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){let i=e-t,s=n-r,l=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&o&&(l[0]=-1*l[0]),s&&a&&(l[1]=-1*l[1]),l}({width:x.width,prevWidth:N,height:x.height,prevHeight:j,affectsX:i.controlDirection.affectsX,affectsY:i.controlDirection.affectsY}),D={...x,direction:$};!1!==p?.(e,D)&&(k=!0,u?.(e,D),r(S,c))}).on("end",e=>{k&&(h?.(e,{...x}),o?.({...x}),k=!1)});a.call(N)},destroy:function(){a.on(".drag",null)}}}({domNode:S.current,nodeId:N,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:a}=j.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:a}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:a}=j.getState(),i=[],s={x:e.x,y:e.y},l=r.get(N);if(l&&l.expandParent&&l.parentId){let t=l.origin??a,n=e.width??l.measured.width??0,c=e.height??l.measured.height??0,d=rQ([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...rb({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,r,t)}}],r,o,a);i.push(...d),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){let e={id:N,type:"position",position:{...s}};i.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:N,type:"dimensions",resizing:!0,setAttributes:!h||("horizontal"===h?"width":"height"),dimensions:{width:e.width,height:e.height}};i.push(t)}for(let e of t){let t={...e,type:"position"};i.push(t)}n(i)},onEnd:({width:e,height:t})=>{j.getState().triggerNodeChanges([{id:N,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}}])}})),C.current.update({controlPosition:E,boundaries:{minWidth:s,minHeight:l,maxWidth:c,maxHeight:d},keepAspectRatio:u,resizeDirection:h,onResizeStart:g,onResize:m,onResizeEnd:x,shouldResize:f}),()=>{C.current?.destroy()}},[E,s,l,c,d,u,g,m,x,f]);let A=E.split("-");return(0,v.jsx)("div",{className:em(["react-flow__resize-control","nodrag",...A,n,r]),ref:S,style:{...o,scale:M,...i&&{[_?"backgroundColor":"borderColor"]:i}},children:a})});let iX=(0,b.memo)(function({data:e,selected:t}){let{task:n,agentName:r,agentColor:o}=e,a=F[n.status];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(av,{type:"target",position:m.Top,className:"!bg-gray-600 !border-gray-500 !w-2 !h-2"}),(0,v.jsxs)("div",{className:`px-4 py-3 rounded-lg border min-w-[200px] max-w-[280px] transition-all cursor-pointer ${t?"ring-2 ring-cyan-400/50":""}`,style:{background:"var(--color-bg-card)",borderColor:t?a:"var(--color-border-subtle)",borderLeftWidth:"3px",borderLeftColor:a},children:[(0,v.jsxs)("div",{className:"flex items-start gap-2 mb-1.5",children:[(0,v.jsx)(q,{status:n.status,size:"sm",pulse:"in-progress"===n.status}),(0,v.jsx)("span",{className:"text-xs font-semibold leading-tight flex-1",children:n.title})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded capitalize",style:{backgroundColor:`${a}15`,color:a},children:n.status.replace("-"," ")}),r&&(0,v.jsx)("span",{className:"text-[10px] font-medium",style:{color:o||"var(--color-text-muted)"},children:r})]}),n.evidence.length>0&&(0,v.jsx)("div",{className:"mt-1.5 flex items-center gap-1",children:(0,v.jsxs)("span",{className:"text-[9px]",style:{color:"var(--color-text-muted)"},children:["ðŸ“Ž ",n.evidence.length," evidence"]})})]}),(0,v.jsx)(av,{type:"source",position:m.Bottom,className:"!bg-gray-600 !border-gray-500 !w-2 !h-2"})]})}),iq=P("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iY=P("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function iK({taskId:e,onClose:t}){let{getTaskById:n,getAgentById:r,tasks:o,approveTask:a,rejectTask:i,updateTaskStatus:s}=C(),l=n(e);if(!l)return null;let c=l.assignee?r(l.assignee):null,d=l.deps.map(e=>o.find(t=>t.id===e)).filter(Boolean),u=o.filter(t=>t.deps.includes(e));return(0,v.jsxs)("div",{className:"w-80 rounded-xl border overflow-hidden shrink-0",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)",height:"calc(100vh - 12rem)"},children:[(0,v.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:"var(--color-border)"},children:[(0,v.jsx)("h3",{className:"text-sm font-semibold",children:"Task Details"}),(0,v.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-300 transition-colors",children:(0,v.jsx)(iq,{size:16})})]}),(0,v.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto",style:{maxHeight:"calc(100% - 50px)"},children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,v.jsx)(q,{status:l.status,size:"md",pulse:"in-progress"===l.status}),(0,v.jsx)("span",{className:"text-xs font-mono",style:{color:"var(--color-text-muted)"},children:l.id})]}),(0,v.jsx)("h4",{className:"font-semibold text-sm",children:l.title}),(0,v.jsx)("p",{className:"text-xs mt-1.5 leading-relaxed",style:{color:"var(--color-text-secondary)"},children:l.description})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,v.jsx)("span",{style:{color:"var(--color-text-muted)"},children:"Priority"}),(0,v.jsx)("span",{className:"font-mono font-medium",children:l.priority})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,v.jsx)("span",{style:{color:"var(--color-text-muted)"},children:"Assignee"}),c?(0,v.jsx)("span",{className:"font-medium",style:{color:c.color},children:c.name}):(0,v.jsx)("span",{style:{color:"var(--color-text-muted)"},children:"Unassigned"})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,v.jsx)("span",{style:{color:"var(--color-text-muted)"},children:"Status"}),(0,v.jsx)("span",{className:"capitalize",children:l.status.replace("-"," ")})]})]}),d.length>0&&(0,v.jsxs)("div",{children:[(0,v.jsx)("h5",{className:"text-[10px] uppercase tracking-wider mb-2",style:{color:"var(--color-text-muted)"},children:"Depends On"}),(0,v.jsx)("div",{className:"space-y-1",children:d.map(e=>e&&(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs px-2 py-1.5 rounded",style:{background:"var(--color-bg-tertiary)"},children:[(0,v.jsx)(q,{status:e.status,size:"sm"}),(0,v.jsx)("span",{className:"truncate flex-1",children:e.title})]},e.id))})]}),u.length>0&&(0,v.jsxs)("div",{children:[(0,v.jsx)("h5",{className:"text-[10px] uppercase tracking-wider mb-2",style:{color:"var(--color-text-muted)"},children:"Blocks"}),(0,v.jsx)("div",{className:"space-y-1",children:u.map(e=>(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs px-2 py-1.5 rounded",style:{background:"var(--color-bg-tertiary)"},children:[(0,v.jsx)(q,{status:e.status,size:"sm"}),(0,v.jsx)("span",{className:"truncate flex-1",children:e.title})]},e.id))})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("h5",{className:"text-[10px] uppercase tracking-wider mb-2",style:{color:"var(--color-text-muted)"},children:["Evidence ",l.evidence.length>0?`(${l.evidence.length})`:""]}),0===l.evidence.length?(0,v.jsx)("div",{className:"text-xs py-3 text-center rounded",style:{background:"var(--color-bg-tertiary)",color:"var(--color-text-muted)"},children:"No evidence yet"}):(0,v.jsx)("div",{className:"space-y-2",children:l.evidence.map(e=>(0,v.jsxs)("div",{className:"text-xs p-2.5 rounded space-y-1",style:{background:"var(--color-bg-tertiary)"},children:[e.commitSha&&(0,v.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,v.jsx)(Q,{size:10,style:{color:"var(--color-accent-orange)"}}),(0,v.jsx)("span",{className:"font-mono",children:e.commitSha})]}),e.testOutput&&(0,v.jsxs)("div",{className:"flex items-center gap-1.5",children:[e.testPassed?(0,v.jsx)(D,{size:10,style:{color:"var(--color-accent-green)"}}):(0,v.jsx)(et,{size:10,style:{color:"var(--color-accent-red)"}}),(0,v.jsx)("span",{style:{color:"var(--color-text-secondary)"},children:e.testOutput})]}),(0,v.jsx)("p",{style:{color:"var(--color-text-muted)"},children:e.description})]},e.id))})]}),"in-review"===l.status&&(0,v.jsxs)("div",{className:"space-y-2 pt-2 border-t",style:{borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("button",{onClick:()=>a(e),className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-medium bg-green-500/10 text-green-400 hover:bg-green-500/20 transition-colors",children:[(0,v.jsx)(D,{size:14})," Approve"]}),(0,v.jsxs)("button",{onClick:()=>i(e,"Needs changes"),className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-medium bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors",children:[(0,v.jsx)(et,{size:14})," Request Changes"]})]}),"ready"===l.status&&(0,v.jsx)("div",{className:"pt-2 border-t",style:{borderColor:"var(--color-border-subtle)"},children:(0,v.jsxs)("button",{onClick:()=>s(e,"in-progress"),className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-medium bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 transition-colors",children:[(0,v.jsx)(iY,{size:14})," Start Task"]})})]})]})}let iW={taskNode:iX};function iG(){let{tasks:e,agents:t,selectTask:n}=C(),[r,o]=(0,b.useState)(null),{nodes:a,edges:i}=(0,b.useMemo)(()=>{let n,r,o;return n=new Map,e.forEach(t=>(function t(r,o=new Set){if(o.has(r))return 0;if(o.add(r),n.has(r))return n.get(r);let a=e.find(e=>e.id===r);if(!a||0===a.deps.length)return n.set(r,0),0;let i=Math.max(...a.deps.map(e=>t(e,o)))+1;return n.set(r,i),i})(t.id)),r=new Map,n.forEach((e,t)=>{r.has(e)||r.set(e,[]),r.get(e).push(t)}),o=[],r.forEach((n,r)=>{let a=-(260*n.length+(n.length-1)*40)/2;n.forEach((n,i)=>{let s=e.find(e=>e.id===n),l=s.assignee?t.find(e=>e.id===s.assignee):void 0;o.push({id:n,type:"taskNode",position:{x:a+300*i,y:140*r},data:{task:s,agentName:l?.name,agentColor:l?.color}})})}),{nodes:o,edges:e.flatMap(e=>e.deps.map(t=>({id:`${t}-${e.id}`,source:t,target:e.id,style:{stroke:"var(--color-border)",strokeWidth:1.5},animated:"in-progress"===e.status})))}},[e,t]),s=(0,b.useCallback)(({nodes:e})=>{if(e.length>0){let t=e[0].id;o(t),n(t)}else o(null),n(null)},[n]),l=(0,b.useMemo)(()=>{let t={};return e.forEach(e=>{t[e.status]=(t[e.status]||0)+1}),t},[e]);return(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Task Graph"}),(0,v.jsxs)("p",{className:"text-sm mt-1",style:{color:"var(--color-text-muted)"},children:["Dependency visualization â€” ",e.length," tasks"]})]}),(0,v.jsx)("div",{className:"flex gap-2",children:Object.entries(l).map(([e,t])=>(0,v.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full font-medium",style:{backgroundColor:`${F[e]}15`,color:F[e]},children:[e.replace("-"," "),": ",t]},e))})]}),(0,v.jsxs)("div",{className:"flex gap-4",children:[(0,v.jsx)("div",{className:"flex-1 rounded-xl border overflow-hidden",style:{height:"calc(100vh - 12rem)",background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:(0,v.jsxs)(iv,{nodes:a,edges:i,onSelectionChange:s,nodeTypes:iW,fitView:!0,fitViewOptions:{padding:.3},minZoom:.3,maxZoom:2,proOptions:{hideAttribution:!0},children:[(0,v.jsx)(iS,{variant:x.Dots,gap:20,size:1,color:"#1e1e2e"}),(0,v.jsx)(iT,{className:"!bg-gray-900 !border-gray-700 !rounded-lg [&>button]:!bg-gray-800 [&>button]:!border-gray-700 [&>button]:!text-gray-300 [&>button:hover]:!bg-gray-700"}),(0,v.jsx)(iZ,{className:"!bg-gray-900 !border-gray-700 !rounded-lg",nodeColor:e=>{let t=e.data?.task;return t&&F[t.status]||"#64748b"},maskColor:"rgba(0, 0, 0, 0.7)"})]})}),r&&(0,v.jsx)(iK,{taskId:r,onClose:()=>{o(null),n(null)}})]})]})}let iU=P("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),iQ=P("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function iJ({line:e}){let t="add"===e.type?"rgba(34, 197, 94, 0.08)":"remove"===e.type?"rgba(239, 68, 68, 0.08)":"transparent",n="add"===e.type?"var(--color-accent-green)":"remove"===e.type?"var(--color-accent-red)":"var(--color-text-secondary)",r="add"===e.type?"+":"remove"===e.type?"-":" ";return(0,v.jsxs)("div",{className:"flex font-mono text-[11px] leading-relaxed",style:{backgroundColor:t},children:[(0,v.jsx)("span",{className:"w-12 shrink-0 text-right pr-3 select-none",style:{color:"var(--color-text-muted)"},children:e.lineNumber||""}),(0,v.jsx)("span",{className:"w-4 shrink-0 select-none",style:{color:n},children:r}),(0,v.jsx)("span",{style:{color:n},className:"whitespace-pre",children:e.content})]})}function i0({file:e}){let[t,n]=(0,b.useState)(!0);return(0,v.jsxs)("div",{className:"rounded-lg border overflow-hidden",style:{borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("button",{onClick:()=>n(!t),className:"w-full flex items-center gap-3 px-3 py-2 text-xs hover:bg-white/[0.02] transition-colors",style:{background:"var(--color-bg-tertiary)"},children:[(0,v.jsx)(O,{size:12,style:{color:"var(--color-text-muted)"}}),(0,v.jsx)("span",{className:"font-mono flex-1 text-left",children:e.path}),(0,v.jsxs)("span",{className:"flex items-center gap-2",children:[(0,v.jsxs)("span",{className:"flex items-center gap-0.5 text-green-400",children:[(0,v.jsx)(iU,{size:10})," ",e.additions]}),(0,v.jsxs)("span",{className:"flex items-center gap-0.5 text-red-400",children:[(0,v.jsx)(iQ,{size:10})," ",e.deletions]})]})]}),t&&(0,v.jsx)("div",{className:"overflow-x-auto",style:{background:"var(--color-bg-primary)"},children:e.hunks.map((e,t)=>(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"px-3 py-1 text-[10px] font-mono",style:{color:"var(--color-accent-cyan)",background:"rgba(6, 182, 212, 0.05)"},children:e.header}),e.lines.map((e,t)=>(0,v.jsx)(iJ,{line:e},t))]},t))})]})}function i1({taskId:e}){let t=M[e];return t&&0!==t.length?(0,v.jsxs)("div",{className:"rounded-xl border overflow-hidden h-full flex flex-col",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:"var(--color-border)"},children:[(0,v.jsx)("h3",{className:"text-sm font-semibold",children:"Changes"}),(0,v.jsxs)("span",{className:"text-xs",style:{color:"var(--color-text-muted)"},children:[t.length," file",1!==t.length?"s":""," changed"]})]}),(0,v.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.map((e,t)=>(0,v.jsx)(i0,{file:e},t))})]}):(0,v.jsx)("div",{className:"rounded-xl border p-8 text-center h-full flex items-center justify-center",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:(0,v.jsxs)("div",{children:[(0,v.jsx)(O,{size:32,className:"mx-auto mb-3",style:{color:"var(--color-text-muted)"}}),(0,v.jsx)("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"No diff available for this task"})]})})}function i2(){let{tasks:e,agents:t,approveTask:n,rejectTask:r}=C(),[o,a]=(0,b.useState)(null),i=e.filter(e=>"in-review"===e.status),s=o?e.find(e=>e.id===o):i[0],l=s?.assignee?t.find(e=>e.id===s.assignee):null;return(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Review Queue"}),(0,v.jsxs)("p",{className:"text-sm mt-1",style:{color:"var(--color-text-muted)"},children:[i.length," task",1!==i.length?"s":""," awaiting review"]})]}),i.length>1&&(0,v.jsxs)("button",{onClick:()=>{i.forEach(e=>n(e.id))},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-medium bg-green-500/10 text-green-400 hover:bg-green-500/20 transition-colors",children:[(0,v.jsx)(D,{size:14})," Approve All (",i.length,")"]})]}),0===i.length?(0,v.jsxs)("div",{className:"rounded-xl border p-12 text-center",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsx)(D,{size:48,className:"mx-auto mb-4",style:{color:"var(--color-accent-green)"}}),(0,v.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"All clear!"}),(0,v.jsx)("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"No tasks awaiting review. Agents are still working."})]}):(0,v.jsxs)("div",{className:"flex gap-4",style:{height:"calc(100vh - 12rem)"},children:[(0,v.jsxs)("div",{className:"w-72 shrink-0 rounded-xl border overflow-hidden",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--color-border)"},children:(0,v.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,v.jsx)(ee,{size:14,style:{color:"var(--color-accent-purple)"}}),"Pending Reviews"]})}),(0,v.jsx)("div",{className:"divide-y overflow-y-auto",style:{borderColor:"var(--color-border-subtle)"},children:i.map(e=>{let n=e.assignee?t.find(t=>t.id===e.assignee):null,r=s?.id===e.id;return(0,v.jsx)("button",{onClick:()=>a(e.id),className:`w-full text-left px-4 py-3 transition-colors ${r?"bg-white/5":"hover:bg-white/[0.02]"}`,children:(0,v.jsxs)("div",{className:"flex items-start gap-2",children:[(0,v.jsx)(q,{status:e.status,size:"sm"}),(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsx)("div",{className:"text-xs font-medium truncate",children:e.title}),(0,v.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[n&&(0,v.jsx)("span",{className:"text-[10px]",style:{color:n.color},children:n.name}),(0,v.jsxs)("span",{className:"text-[10px] flex items-center gap-1",style:{color:"var(--color-text-muted)"},children:[(0,v.jsx)(K,{size:9})," ",function(e){let t=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(t<60)return`${t}m ago`;let n=Math.floor(t/60);return n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`}(e.updatedAt)]})]})]})]})},e.id)})})]}),s&&(0,v.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,v.jsxs)("div",{className:"rounded-xl border p-4",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"font-semibold",children:s.title}),(0,v.jsx)("p",{className:"text-xs mt-1",style:{color:"var(--color-text-secondary)"},children:s.description}),(0,v.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[l&&(0,v.jsxs)("span",{className:"text-xs flex items-center gap-1.5",style:{color:l.color},children:[(0,v.jsx)("span",{className:"w-4 h-4 rounded-full flex items-center justify-center text-[8px] font-bold",style:{backgroundColor:`${l.color}20`},children:l.name[0]}),l.name," (",l.model,")"]}),s.evidence.length>0&&s.evidence[0].commitSha&&(0,v.jsxs)("span",{className:"text-xs flex items-center gap-1",style:{color:"var(--color-text-muted)"},children:[(0,v.jsx)(Q,{size:12})," ",s.evidence[0].commitSha]})]})]}),(0,v.jsxs)("div",{className:"flex gap-2",children:[(0,v.jsxs)("button",{onClick:()=>n(s.id),className:"flex items-center gap-1.5 px-4 py-2 rounded-lg text-xs font-medium bg-green-500/10 text-green-400 hover:bg-green-500/20 transition-colors",children:[(0,v.jsx)(D,{size:14})," Approve"]}),(0,v.jsxs)("button",{onClick:()=>r(s.id,"Needs changes"),className:"flex items-center gap-1.5 px-4 py-2 rounded-lg text-xs font-medium bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors",children:[(0,v.jsx)(et,{size:14})," Changes"]})]})]}),s.evidence.length>0&&(0,v.jsxs)("div",{className:"mt-3 pt-3 border-t",style:{borderColor:"var(--color-border-subtle)"},children:[(0,v.jsx)("h4",{className:"text-[10px] uppercase tracking-wider mb-2",style:{color:"var(--color-text-muted)"},children:"Evidence"}),s.evidence.map(e=>(0,v.jsx)("div",{className:"flex items-center gap-3 text-xs",children:void 0!==e.testPassed&&(0,v.jsxs)("span",{className:"flex items-center gap-1",children:[e.testPassed?(0,v.jsx)(D,{size:12,style:{color:"var(--color-accent-green)"}}):(0,v.jsx)(et,{size:12,style:{color:"var(--color-accent-red)"}}),(0,v.jsx)("span",{style:{color:"var(--color-text-secondary)"},children:e.testOutput})]})},e.id))]})]}),(0,v.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,v.jsx)(i1,{taskId:s.id})})]})]})]})}let i4=["proposal","specs","design","tasks"],i5=["implementing","in-review","verified","archived"],i3={active:"var(--color-accent-cyan)",implementing:"var(--color-accent-amber)","in-review":"var(--color-accent-purple)",verified:"var(--color-accent-green)",archived:"var(--color-text-muted)"};function i6(){let{changes:e}=C();return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Spec Studio"}),(0,v.jsx)("p",{className:"text-sm mt-1",style:{color:"var(--color-text-muted)"},children:"Spec-driven planning â€” artifacts and workflow states"})]}),(0,v.jsx)("div",{className:"rounded-xl border p-4",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:(0,v.jsxs)("div",{className:"flex items-center gap-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-[10px] uppercase tracking-wider mb-2",style:{color:"var(--color-text-muted)"},children:"Artifacts"}),(0,v.jsx)("div",{className:"flex items-center gap-2",children:i4.map((e,t)=>(0,v.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,v.jsx)("span",{className:"text-xs capitalize px-2 py-1 rounded",style:{background:"var(--color-bg-tertiary)"},children:e}),t<i4.length-1&&(0,v.jsx)(B,{size:12,style:{color:"var(--color-text-muted)"}})]},e))})]}),(0,v.jsx)("div",{className:"w-px h-10",style:{background:"var(--color-border)"}}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-[10px] uppercase tracking-wider mb-2",style:{color:"var(--color-text-muted)"},children:"States"}),(0,v.jsx)("div",{className:"flex items-center gap-2",children:i5.map((e,t)=>(0,v.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,v.jsx)("span",{className:"text-xs capitalize px-2 py-1 rounded",style:{backgroundColor:`${i3[e]}15`,color:i3[e]},children:e.replace("-"," ")}),t<i5.length-1&&(0,v.jsx)(B,{size:12,style:{color:"var(--color-text-muted)"}})]},e))})]})]})}),(0,v.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,v.jsxs)("div",{className:"rounded-xl border p-5 transition-all hover:border-white/10",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"font-semibold text-sm",children:e.name}),(0,v.jsx)("p",{className:"text-xs mt-1",style:{color:"var(--color-text-secondary)"},children:e.description})]}),(0,v.jsx)("span",{className:"text-[10px] px-2 py-1 rounded-full capitalize font-medium",style:{backgroundColor:`${i3[e.status]}15`,color:i3[e.status]},children:e.status.replace("-"," ")})]}),(0,v.jsx)("div",{className:"flex gap-2",children:i4.map(t=>{let n=e.artifacts.find(e=>e.type===t);return(0,v.jsxs)("div",{className:`flex-1 rounded-lg p-3 border transition-all ${n?"cursor-pointer hover:border-white/10":""}`,style:{background:n?"var(--color-bg-tertiary)":"var(--color-bg-secondary)",borderColor:n?n.stale?"var(--color-accent-amber)":"var(--color-border-subtle)":"transparent",opacity:n?1:.4},children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,v.jsx)(O,{size:12,style:{color:n?"var(--color-accent-cyan)":"var(--color-text-muted)"}}),(0,v.jsx)("span",{className:"text-[10px] uppercase tracking-wider font-medium",children:t}),n?.stale&&(0,v.jsx)(en,{size:10,style:{color:"var(--color-accent-amber)"}})]}),(0,v.jsx)("div",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:n?n.title:"Not created"})]},t)})}),(0,v.jsxs)("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",style:{borderColor:"var(--color-border-subtle)"},children:[(0,v.jsxs)("span",{className:"text-xs",style:{color:"var(--color-text-muted)"},children:[e.taskIds.length," task",1!==e.taskIds.length?"s":""]}),(0,v.jsx)("span",{className:"text-[10px] font-mono",style:{color:"var(--color-text-muted)"},children:e.id})]})]},e.id))}),(0,v.jsx)("div",{className:"rounded-xl border border-dashed p-6 text-center",style:{borderColor:"var(--color-border)",color:"var(--color-text-muted)"},children:(0,v.jsx)("p",{className:"text-sm",children:"Interactive artifact editing and â€œGenerate Tasksâ€ coming in MVP"})})]})}let i8=P("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),i7=P("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function i9(){let{agents:e,tasks:t}=C();return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Agent Registry"}),(0,v.jsxs)("p",{className:"text-sm mt-1",style:{color:"var(--color-text-muted)"},children:[e.length," agent",1!==e.length?"s":""," registered"]})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map(e=>{let n=t.filter(t=>t.assignee===e.id),r=n.filter(e=>"done"===e.status).length,o=n.filter(e=>"in-progress"===e.status).length,a=n.filter(e=>"in-review"===e.status).length;return(0,v.jsx)("div",{className:"rounded-xl border p-5 transition-all hover:border-white/10",style:{background:"var(--color-bg-card)",borderColor:"var(--color-border-subtle)"},children:(0,v.jsxs)("div",{className:"flex items-start gap-4",children:[(0,v.jsx)("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shrink-0",style:{backgroundColor:`${e.color}15`},children:(0,v.jsx)(R,{size:28,style:{color:e.color}})}),(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,v.jsx)("h3",{className:"font-semibold",children:e.name}),(0,v.jsx)(q,{status:e.status,type:"agent",size:"md",pulse:"working"===e.status}),(0,v.jsx)("span",{className:"text-xs capitalize",style:{color:X[e.status]},children:e.status.replace("-"," ")})]}),(0,v.jsxs)("div",{className:"flex items-center gap-4 text-xs",style:{color:"var(--color-text-secondary)"},children:[(0,v.jsx)("span",{children:e.provider}),(0,v.jsx)("span",{className:"font-mono",children:e.model}),(0,v.jsxs)("span",{className:"flex items-center gap-1",children:["connected"===e.connectionStatus?(0,v.jsx)(i8,{size:11,style:{color:"var(--color-accent-green)"}}):(0,v.jsx)(i7,{size:11,style:{color:"var(--color-accent-red)"}}),e.connectionStatus]})]}),(0,v.jsx)("div",{className:"flex gap-1.5 mt-2 flex-wrap",children:e.capabilities.map(e=>(0,v.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full",style:{background:"var(--color-bg-tertiary)",color:"var(--color-text-muted)"},children:e},e))})]}),(0,v.jsxs)("div",{className:"flex gap-4 shrink-0",children:[(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1 justify-center",children:[(0,v.jsx)(Y,{size:12,style:{color:"var(--color-accent-amber)"}}),(0,v.jsx)("span",{className:"text-lg font-bold",children:o})]}),(0,v.jsx)("div",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:"Active"})]}),(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1 justify-center",children:[(0,v.jsx)(K,{size:12,style:{color:"var(--color-accent-purple)"}}),(0,v.jsx)("span",{className:"text-lg font-bold",children:a})]}),(0,v.jsx)("div",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:"Review"})]}),(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1 justify-center",children:[(0,v.jsx)(es,{size:12,style:{color:"var(--color-accent-green)"}}),(0,v.jsx)("span",{className:"text-lg font-bold",children:r})]}),(0,v.jsx)("div",{className:"text-[10px]",style:{color:"var(--color-text-muted)"},children:"Done"})]})]})]})},e.id)})}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"rounded-xl border border-dashed p-6 text-center",style:{borderColor:"var(--color-border)",color:"var(--color-text-muted)"},children:[(0,v.jsx)(es,{size:24,className:"mx-auto mb-2"}),(0,v.jsx)("p",{className:"text-sm font-medium mb-1",children:"Access Controls"}),(0,v.jsx)("p",{className:"text-xs",children:"Identity rules, repo permissions â€” coming in MVP"})]}),(0,v.jsxs)("div",{className:"rounded-xl border border-dashed p-6 text-center",style:{borderColor:"var(--color-border)",color:"var(--color-text-muted)"},children:[(0,v.jsx)(Y,{size:24,className:"mx-auto mb-2"}),(0,v.jsx)("p",{className:"text-sm font-medium mb-1",children:"Cost Tracking"}),(0,v.jsx)("p",{className:"text-xs",children:"Per-agent token usage and cost â€” coming in MVP"})]})]})]})}function se(){let{activeScreen:e}=C();switch(e){case"mission-control":default:return(0,v.jsx)(eg,{});case"task-graph":return(0,v.jsx)(iG,{});case"review-queue":return(0,v.jsx)(i2,{});case"spec-studio":return(0,v.jsx)(i6,{});case"agent-registry":return(0,v.jsx)(i9,{})}}function st(){let{sidebarOpen:e,setActiveScreen:t,toggleCommandPalette:n}=C();return(0,b.useEffect)(()=>{function e(e){if((e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),n()),!e.metaKey&&!e.ctrlKey&&!e.altKey){let n=["mission-control","task-graph","review-queue","spec-studio","agent-registry"],r=parseInt(e.key)-1;r>=0&&r<n.length&&t(n[r])}}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,n]),(0,v.jsxs)("div",{className:"min-h-screen bg-grid",children:[(0,v.jsx)(Z,{}),(0,v.jsx)("main",{className:`transition-all duration-300 min-h-screen ${e?"ml-56":"ml-16"}`,children:(0,v.jsx)("div",{className:"p-6 max-w-7xl mx-auto",children:(0,v.jsx)(se,{})})})]})}e.s(["default",()=>st],52683)}]);